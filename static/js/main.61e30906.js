/*! For license information please see main.61e30906.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},529:function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.Q=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},77:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},421:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},988:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},176:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var o=t.exec(e||""),s={},u=14;u--;)s[n[u]]=o[u]||"";return-1!=i&&-1!=a&&(s.source=r,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,E=60106,x=60107,S=60108,T=60114,I=60109,C=60110,A=60112,N=60113,R=60120,D=60115,O=60116,L=60121,P=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;_=j("react.element"),E=j("react.portal"),x=j("react.fragment"),S=j("react.strict_mode"),T=j("react.profiler"),I=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),N=j("react.suspense"),R=j("react.suspense_list"),D=j("react.memo"),O=j("react.lazy"),L=j("react.block"),j("react.scope"),P=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var B,V="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var K=!1;function H(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return G(e.type);case L:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Ie(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Oe(e,t){return e(t)}function Le(e,t,n,r,i){return e(t,n,r,i)}function Pe(){}var Me=Oe,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ae||(Pe(),De())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Ve=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,He=null,We=!1,Ge=null,Qe={onError:function(e){Ke=!0,He=e}};function Ye(e,t,n,r,i,a,o,s,u){Ke=!1,He=null,ze.apply(Qe,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Xe(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},St={},Tt={};function It(e){if(St[e])return St[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return St[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Ct=It("animationend"),At=It("animationiteration"),Nt=It("animationstart"),Rt=It("transitionend"),Dt=new Map,Ot=new Map,Lt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Bt(10,t):e;case 10:return 0===(e=Vt(192&~t))?Bt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){Fe||Pe();var i=Jt,a=Fe;Fe=!0;try{Le(i,e,t,n,r)}finally{(Fe=a)||je()}}function $t(e,t,n,r){Qt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=yt(st,e,t,n,r,i),!0;case"dragenter":return ut=yt(ut,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Pr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Xe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=$e(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Pr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(yn),gn=un(i({},yn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),bn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=un(wn),En=un(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return In}var An=i({},pn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=un(An),Rn=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=un(Ln),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Bn=f&&(!Fn||Un&&8<Un&&11>=Un),Vn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function $n(e){Ar(e,0)}function Jn(e){if($(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Xn=Yn=null)}function ar(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];if(Qn(t,Xn,e,Te(e)),e=$n,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Xn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Lt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<xr.length;Sr++)Ot.set(xr[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=He;Ke=!1,He=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Ir.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Lr(a,e,i,t),o.add(s))}function Lr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Dt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dn;break;case Ct:case At:case Nt:u=bn;break;case Rt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Be(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(Gn(s))if(er)y=cr;else{y=sr;var m=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ur);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Fr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Vn);case"textInput":return(e=t.data)===Vn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Be(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Be(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=Be(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var Vr=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Zr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ei=null,xi=null,Si=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Ii=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Li=a.unstable_NormalPriority,Pi=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ai?Ai:function(){},ji=null,Bi=null,Vi=!1,qi=Ni(),zi=1e4>qi?Ni:function(){return Ni()-qi};function Ki(){switch(Ri()){case Di:return 99;case Oi:return 98;case Li:return 97;case Pi:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Di;case 98:return Oi;case 97:return Li;case 96:return Pi;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Si(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Bi){var e=Bi;Bi=null,Ii(e)}Yi()}function Yi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Di,Qi),n}finally{Vi=!1}}}var Xi=w.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=$u(t,e.mode,n)).return=e,t}if(_a(t)||q(t))return(t=Qu(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===x?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(_a(n)||q(n))return null!==i?null:f(e,t,n,r,null);xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===x?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);xa(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=q(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=a(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===x&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===x){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===x?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=Ea(e,r,a),u.return=e,e=u)}return s(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xu(a,e.mode,u)).return=e,e=r),s(e);if(_a(a))return v(e,r,a,u);if(q(a))return y(e,r,a,u);if(l&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Sa(!0),Ia=Sa(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Da(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function La(){li(Aa),li(Na),li(Ra)}function Pa(e){Da(Ra.current);var t=Da(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ba=null,Va=!1;function qa(e,t){var n=Ku(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Va){var t=Ba;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(ja=e);qa(ja,n)}ja=e,Ba=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Va)return Ha(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Ba;t;)qa(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Ba=ja=null,Va=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Xa=w.ReactCurrentDispatcher,$a=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=null===e||null===e.memoizedState?Oo:Lo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Xa.current=Po,e=n(r,i)}while(ro)}if(Xa.current=Do,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Xa.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Kt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function yo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function bo(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return bo(516,4,e,t)}function Eo(e,t){return wo(516,4,e,t)}function xo(e,t){return wo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)}function Io(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=$a.transition;$a.transition=1;try{e(!1),t()}finally{$a.transition=n}}))}function Ro(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:Io,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:xo,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:xo,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ia(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Bo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Wu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ba(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ya(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$i(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=yi(t,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&ba(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,Xo,$o={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Wu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wu(o,s),null!==e?r=Wu(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Wu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return La(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Da(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Aa.current),Wa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ue(r,s),Nr("invalid",r)}for(var c in xe(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Se(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Nr("invalid",e);break;default:a=r}xe(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?_e(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Nr("scroll",e):null!=f&&b(e,s,f,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Br)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Ra.current),Da(Aa.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Os||0===(134217727&Vs)&&0===(134217727&qs)||gu(Os,Ps))),(r||n)&&(t.flags|=4),null);case 4:return La(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ws&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return Eu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(La(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return La(),null;case 10:return ra(e),null;case 23:case 24:return Eu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Aa.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Br)}for(f in xe(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===P?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,$s=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bu(e,n)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){Bu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bu(t,a)}break;case 5:vs(t);break;case 4:Ss(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Es(e,n,t):xs(e,n,t)}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Is(t);case 19:return void Is(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=qu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var As=Math.ceil,Ns=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,Ds=0,Os=null,Ls=null,Ps=0,Ms=0,Fs=ci(0),Us=0,js=null,Bs=0,Vs=0,qs=0,zs=0,Ks=null,Hs=0,Ws=1/0;function Gs(){Ws=zi()+500}var Qs,Ys=null,Xs=!1,$s=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ds)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===uu&&(uu=Bs),0!==Xi.transition){0!==cu&&(cu=null!==Ks?Ks.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ds)&&98===e?e=Bt(12,uu):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(qs|=t,4===Us&&gu(e,Ps));var r=Ki();1===t?0!==(8&Ds)&&0===(48&Ds)?ku(e):(yu(e,n),0===Ds&&(Gs(),Qi())):(0===(4&Ds)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),yu(e,n)),Ks=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Kt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Os?Ps:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ii(n)}15===t?(n=ku.bind(null,e),null===ji?(ji=[n],Bi=Ti(Di,Yi)):ji.push(n),n=Fi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&Ds))throw Error(o(327));var t=e.callbackNode;if(Pu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Os?Ps:0);if(0===n)return null;var r=n,i=Ds;Ds|=16;var a=Tu();for(Os===e&&Ps===r||(Gs(),xu(e,r));;)try{Au();break}catch(u){Su(e,u)}if(na(),Ns.current=a,Ds=i,null!==Ls?r=0:(Os=null,Ps=0,r=Us),0!==(Bs&qs))xu(e,0);else if(0!==r){if(2===r&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Iu(e,n))),1===r)throw t=js,xu(e,0),gu(e,n),yu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Du(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Du.bind(null,e),r);break}Du(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Kt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*As(n/1960))-n)){e.timeoutHandle=Hr(Du.bind(null,e),n);break}Du(e);break;default:throw Error(o(329))}}return yu(e,zi()),e.callbackNode===t?mu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~qs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ds))throw Error(o(327));if(Pu(),e===Os&&0!==(e.expiredLanes&Ps)){var t=Ps,n=Iu(e,t);0!==(Bs&qs)&&(n=Iu(e,t=Ut(e,t)))}else n=Iu(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Iu(e,t))),1===n)throw n=js,xu(e,0),gu(e,t),yu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e),yu(e,zi()),null}function bu(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Qi())}}function wu(e,t){var n=Ds;Ds&=-2,Ds|=8;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Qi())}}function _u(e,t){fi(Fs,Ms),Ms|=t,Bs|=t}function Eu(){Ms=Fs.current,li(Fs)}function xu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ls)for(n=Ls.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:La(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:La();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Eu()}n=n.return}Os=e,Ls=Wu(e.current,null),Ps=Ms=Bs=t,Us=0,js=null,zs=qs=Vs=0}function Su(e,t){for(;;){var n=Ls;try{if(na(),Xa.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Rs.current=null,null===n||null===n.return){Us=1,js=t,Ls=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ps,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=Vu.bind(null,a,c,s);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var w=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Js||!Js.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Ru(n)}catch(E){t=E,Ls===n&&null!==n&&(Ls=n=n.return);continue}break}}function Tu(){var e=Ns.current;return Ns.current=Do,null===e?Do:e}function Iu(e,t){var n=Ds;Ds|=16;var r=Tu();for(Os===e&&Ps===t||xu(e,t);;)try{Cu();break}catch(i){Su(e,i)}if(na(),Ds=n,Ns.current=r,null!==Ls)throw Error(o(261));return Os=null,Ps=0,Us}function Cu(){for(;null!==Ls;)Nu(Ls)}function Au(){for(;null!==Ls&&!Ci();)Nu(Ls)}function Nu(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ls=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ls=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ls=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ls=t);Ls=t=e}while(null!==t);0===Us&&(Us=5)}function Du(e){var t=Ki();return Wi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Pu()}while(null!==eu);if(0!==(48&Ds))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ls=Os=null,Ps=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ds,Ds|=32,Rs.current=null,Vr=Yt,mr(s=yr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==u||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===u&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;qr={focusedElem:s,selectionRange:u},Yt=!1,lu=null,fu=!1,Ys=r;do{try{Lu()}catch(T){if(null===Ys)throw Error(o(330));Bu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var b=Ys.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_s(Ys),Ys.flags&=-3;break;case 6:_s(Ys),Ys.flags&=-3,Ts(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ts(Ys.alternate,Ys);break;case 4:Ts(Ys.alternate,Ys);break;case 8:Ss(s,u=Ys);var _=u.alternate;bs(u),null!==_&&bs(_)}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Bu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);if(w=qr,b=yr(),k=w.focusedElem,s=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!w.extend&&_>s&&(u=s,s=_,_=u),u=pr(k,_),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Vr,qr=Vr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var E=Ys.flags;if(36&E&&ms(k,Ys.alternate,Ys),128&E){b=void 0;var x=Ys.ref;if(null!==x){var S=Ys.stateNode;Ys.tag,b=S,"function"===typeof x?x(b):x.current=b}}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Bu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),Ds=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((E=Ys).sibling=null,E.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(yu(e,zi()),Xs)throw Xs=!1,e=$s,$s=null,e;return 0!==(8&Ds)||Qi(),null}function Lu(){for(;null!==Ys;){var e=Ys.alternate;fu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(fu=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,lu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ys(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Pu(),null}))),Ys=Ys.nextEffect}}function Pu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Pu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Pu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ds))throw Error(o(331));var t=Ds;Ds|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Bu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Bu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ds=t,Qi(),!0}function ju(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(zt(e,1,t),yu(e,t))}function Bu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))zt(n,1,i),yu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ps&n)===n&&(4===Us||3===Us&&(62914560&Ps)===Ps&&500>zi()-Hs?xu(e,0):zs|=n),yu(e,t)}function qu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===uu&&(uu=Bs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(zt(e,t,n),yu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ku(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var n=e.alternate;return null===n?((n=Ku(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case S:s=8,i|=1;break;case T:return(e=Ku(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Ku(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Ku(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Yu(n,i,a,t);case U:return(e=Ku(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case C:s=9;break e;case A:s=11;break e;case D:s=14;break e;case O:s=16,r=null;break e;case L:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ku(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Ku(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Ku(23,e,r,t)).elementType=F,e.lanes=n,e}function Xu(e,t,n){return(e=Ku(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Ku(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Ku(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:Pa(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ya(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(i),e=$i(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Bo(null,t,i,$i(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ba=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Va=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return Pa(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Kr(r,i)?s=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=$i(i=t.type,t.pendingProps),Bo(e,t,i,a=$i(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bu,Le=function(e,t,n,r,i){var a=Ds;Ds|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ds=a)&&(Gs(),Qi())}},Pe=function(){0===(49&Ds)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yu(e,zi())}))}Qi()}(),Pu())},Me=function(e,t){var n=Ds;Ds|=2;try{return e(t)}finally{0===(Ds=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Re,De,Pu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),xi=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ds;if(0!==(48&n))return e(t);Ds|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ds=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=I(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,u(_,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>S(o,n))void 0!==u&&0>S(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],I=[],C=1,A=null,N=3,R=!1,D=!1,O=!1;function L(e){for(var t=E(I);null!==t;){if(null===t.callback)x(I);else{if(!(t.startTime<=e))break;x(I),t.sortIndex=t.expirationTime,_(T,t)}t=E(I)}}function P(e){if(O=!1,L(e),!D)if(null!==E(T))D=!0,n(M);else{var t=E(I);null!==t&&r(P,t.startTime-e)}}function M(e,n){D=!1,O&&(O=!1,i()),R=!0;var a=N;try{for(L(n),A=E(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var s=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===E(T)&&x(T),L(n)}else x(T);A=E(T)}if(null!==A)var u=!0;else{var c=E(I);null!==c&&r(P,c.startTime-n),u=!1}return u}finally{A=null,N=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||R||(D=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(I,e),null===E(T)&&e===E(I)&&(O?i():O=!0,r(P,o-s))):(e.sortIndex=u,_(T,e),D||R||(D=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},590:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},i=0,a=0;function o(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function s(){var e=o(+new Date);return e!==t?(i=0,t=e):e+"."+o(i++)}for(;a<64;a++)r[n[a]]=a;s.encode=o,s.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+r[e.charAt(a)];return t},e.exports=s},305:function(e,t,n){"use strict";e.exports=n.p+"static/media/search.51a790d3056a5f15b545.png"},409:function(e,t,n){"use strict";e.exports=n.p+"static/media/success.937c501dd3e674bda38b.png"},716:function(e,t,n){"use strict";e.exports=n.p+"static/media/warning.b0af040842c62a20726f.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/unsplash-app/",function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return Oe},Encoder:function(){return De},PacketType:function(){return Ne},protocol:function(){return Re}});var t={};n.r(t),n.d(t,{FirebaseError:function(){return zt},SDK_VERSION:function(){return Ln},_DEFAULT_ENTRY_NAME:function(){return kn},_addComponent:function(){return En},_addOrOverwriteComponent:function(){return xn},_apps:function(){return wn},_clearComponents:function(){return Cn},_components:function(){return _n},_getProvider:function(){return Tn},_registerComponent:function(){return Sn},_removeServiceInstance:function(){return In},deleteApp:function(){return Un},getApp:function(){return Mn},getApps:function(){return Fn},initializeApp:function(){return Pn},onLog:function(){return Vn},registerVersion:function(){return Bn},setLogLevel:function(){return qn}});var r=n(791),i=n(164),a="page_container__LUbd7";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(184),l=(0,r.createContext)(),f=function(e){var t=e.children,n=u((0,r.useState)([]),2),i=n[0],a=n[1],o=u((0,r.useState)(""),2),s=o[0],f=o[1];return(0,c.jsx)(l.Provider,{value:{images:i,setImages:a,keyboard:s,setKeyboard:f},children:t})},h=l;function d(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)}))}}var y=n(757),m=n.n(y),g="https://powerful-forest-65007.herokuapp.com/image";function k(e){return b.apply(this,arguments)}function b(){return(b=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json().then((function(e){return e})).catch((function(e){return console.log(e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(176);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function R(e,t){if(t&&("object"===N(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function D(e){var t=A();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}var O=n(421),L="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function P(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||O))return new XMLHttpRequest}catch(n){}if(!t)try{return new(L[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var F=setTimeout,U=clearTimeout;function j(e,t){t.useNativeTimers?(e.setTimeoutFn=F.bind(L),e.clearTimeoutFn=U.bind(L)):(e.setTimeoutFn=setTimeout.bind(L),e.clearTimeoutFn=clearTimeout.bind(L))}var B=n(529);function V(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function q(){return q="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=V(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},q.apply(this,arguments)}var z=Object.create(null);z.open="0",z.close="1",z.ping="2",z.pong="3",z.message="4",z.upgrade="5",z.noop="6";var K=Object.create(null);Object.keys(z).forEach((function(e){K[z[e]]=e}));for(var H={type:"error",data:"parser error"},W="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),G="function"===typeof ArrayBuffer,Q=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},Y=function(e,t,n){var r,i=e.type,a=e.data;return W&&a instanceof Blob?t?n(a):Q(a,n):G&&(a instanceof ArrayBuffer||(r=a,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(a):Q(new Blob([a]),n):n(z[i]+(a||""))},X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="undefined"===typeof Uint8Array?[]:new Uint8Array(256),J=0;J<X.length;J++)$[X.charCodeAt(J)]=J;var Z="function"===typeof ArrayBuffer,ee=function(e,t){if(Z){var n=function(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=$[e.charCodeAt(t)],r=$[e.charCodeAt(t+1)],i=$[e.charCodeAt(t+2)],a=$[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&a;return c}(e);return te(n,t)}return{base64:!0,data:e}},te=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},ne=function(e,t){if("string"!==typeof e)return{type:"message",data:te(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:ee(e.substring(1),t)}:K[n]?e.length>1?{type:K[n],data:e.substring(1)}:{type:K[n]}:H},re=String.fromCharCode(30),ie=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).writable=!1,j(S(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return x(n,[{key:"onError",value:function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,q(C(n.prototype),"emit",this).call(this,"error",r),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,q(C(n.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(e){var t=ne(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){q(C(n.prototype),"emit",this).call(this,"packet",e)}},{key:"onClose",value:function(){this.readyState="closed",q(C(n.prototype),"emit",this).call(this,"close")}}]),n}(B.Q),ae=n(590),oe=n(988),se=function(e){I(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).polling=!1,e}return x(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(re),r=[],i=0;i<n.length;i++){var a=ne(n[i],t);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,a){Y(e,!1,(function(e){r[a]=e,++i===n&&t(r.join(re))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=ae()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=oe.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}}]),n}(ie);function ue(){}var ce=null!=new P({xdomain:!1}).responseType,le=function(e){I(n,e);var t=D(n);function n(e){var r;if(_(this,n),r=t.call(this,e),"undefined"!==typeof location){var i="https:"===location.protocol,a=location.port;a||(a=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||a!==e.port,r.xs=e.secure!==i}var o=e&&e.forceBase64;return r.supportsBinary=ce&&!o,r}return x(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new fe(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e){n.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}}]),n}(se),fe=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),j(S(i=t.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return x(n,[{key:"create",value:function(){var e=this,t=M(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new P(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(a){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{r.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(a){return void this.setTimeoutFn((function(){e.onError(a)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=ue,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"abort",value:function(){this.cleanup()}}]),n}(B.Q);if(fe.requestsCount=0,fe.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",he);else if("function"===typeof addEventListener){addEventListener("onpagehide"in L?"pagehide":"unload",he,!1)}function he(){for(var e in fe.requests)fe.requests.hasOwnProperty(e)&&fe.requests[e].abort()}var de="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},pe=L.WebSocket||L.MozWebSocket,ve="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),ye=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return x(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=ve?{}:M(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=ve?new pe(e,t,n):t?new pe(e,t):new pe(e)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],i=n===e.length-1;Y(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(n){}i&&de((function(){t.writable=!0,t.emit("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=ae()),this.supportsBinary||(e.b64=1);var r=oe.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!pe&&!("__initialize"in pe&&this.name===n.prototype.name)}}]),n}(ie),me={websocket:ye,polling:le},ge=function(e){I(n,e);var t=D(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(this,n),r=t.call(this),e&&"object"===typeof e&&(i=e,e=null),e?(e=w(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=w(i.host).host),j(S(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=oe.decode(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close")},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return x(n,[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new me[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var a=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(f(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var a=new Error("probe error");a.transport=r.name,t.emitReserved("upgradeError",a)}})))};function o(){i||(i=!0,f(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&o()}var f=function(){r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",a),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(B.Q);ge.protocol=4;ge.protocol;function ke(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}var be="function"===typeof ArrayBuffer,we=Object.prototype.toString,_e="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===we.call(Blob),Ee="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===we.call(File);function xe(e){return be&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||_e&&e instanceof Blob||Ee&&e instanceof File}function Se(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Se(e[n]))return!0;return!1}if(xe(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Se(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Se(e[i]))return!0;return!1}function Te(e){var t=[],n=e.data,r=e;return r.data=Ie(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ie(e,t){if(!e)return e;if(xe(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=Ie(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]=Ie(e[o],t));return a}return e}function Ce(e,t){return e.data=Ae(e.data,t),e.attachments=void 0,e}function Ae(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Ae(e[n],t);else if("object"===typeof e)for(var r in e)e.hasOwnProperty(r)&&(e[r]=Ae(e[r],t));return e}var Ne,Re=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ne||(Ne={}));var De=function(){function e(){_(this,e)}return x(e,[{key:"encode",value:function(e){return e.type!==Ne.EVENT&&e.type!==Ne.ACK||!Se(e)?[this.encodeAsString(e)]:(e.type=e.type===Ne.EVENT?Ne.BINARY_EVENT:Ne.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Ne.BINARY_EVENT&&e.type!==Ne.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=Te(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Oe=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.call(this)}return x(n,[{key:"add",value:function(e){var t;if("string"===typeof e)(t=this.decodeString(e)).type===Ne.BINARY_EVENT||t.type===Ne.BINARY_ACK?(this.reconstructor=new Le(t),0===t.attachments&&q(C(n.prototype),"emitReserved",this).call(this,"decoded",t)):q(C(n.prototype),"emitReserved",this).call(this,"decoded",t);else{if(!xe(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,q(C(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Ne[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ne.BINARY_EVENT||r.type===Ne.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(i,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Ne.CONNECT:return"object"===typeof t;case Ne.DISCONNECT:return void 0===t;case Ne.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Ne.EVENT:case Ne.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Ne.ACK:case Ne.BINARY_ACK:return Array.isArray(t)}}}]),n}(B.Q);var Le=function(){function e(t){_(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return x(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Ce(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function Pe(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Me=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Fe=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).connected=!1,a.disconnected=!0,a.receiveBuffer=[],a.sendBuffer=[],a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=r,i&&i.auth&&(a.auth=i.auth),a.io._autoConnect&&a.open(),a}return x(n,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Pe(e,"open",this.onopen.bind(this)),Pe(e,"packet",this.onpacket.bind(this)),Pe(e,"error",this.onerror.bind(this)),Pe(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Me.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var i={type:Ne.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),i.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?this.packet(i):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var i=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(i);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:Ne.CONNECT,data:t})})):this.packet({type:Ne.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Ne.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ne.EVENT:case Ne.BINARY_EVENT:this.onevent(e);break;case Ne.ACK:case Ne.BINARY_ACK:this.onack(e);break;case Ne.DISCONNECT:this.ondisconnect();break;case Ne.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=ke(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(i){r.e(i)}finally{r.f()}}q(C(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:Ne.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ne.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(B.Q),Ue=n(77),je=function(t){I(r,t);var n=D(r);function r(t,i){var a,o;_(this,r),(a=n.call(this)).nsps={},a.subs=[],t&&"object"===typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",a.opts=i,j(S(a),i),a.reconnection(!1!==i.reconnection),a.reconnectionAttempts(i.reconnectionAttempts||1/0),a.reconnectionDelay(i.reconnectionDelay||1e3),a.reconnectionDelayMax(i.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(o=i.randomizationFactor)&&void 0!==o?o:.5),a.backoff=new Ue({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==i.timeout?2e4:i.timeout),a._readyState="closed",a.uri=t;var s=i.parser||e;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==i.autoConnect,a._autoConnect&&a.open(),a}return x(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ge(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=Pe(n,"open",(function(){r.onopen(),e&&e()})),a=Pe(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&i();var s=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Pe(e,"ping",this.onping.bind(this)),Pe(e,"data",this.ondata.bind(this)),Pe(e,"error",this.onerror.bind(this)),Pe(e,"close",this.onclose.bind(this)),Pe(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new Fe(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(B.Q),Be={};function Ve(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=w(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,a=r.id,o=r.path,s=Be[a]&&o in Be[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new je(i,t):(Be[a]||(Be[a]=new je(i,t)),n=Be[a]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(Ve,{Manager:je,Socket:Fe,io:Ve,connect:Ve});var qe=Ve("powerful-forest-65007.herokuapp.com"),ze="galery_container__tj2jc",Ke="galery_item__ASMA-",He="galery_img__FbYY9",We="galery_card__k6aY2",Ge="galery_delete__+eKpy",Qe="galery_label__6d65R",Ye="galery_show__rzTvH",Xe=function(e){var t=e.children,n=e.isOpen,r=e.closeModal;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"modal ".concat(n&&"is-open"),onClick:r,children:(0,c.jsx)("div",{className:"modal__container",onClick:function(e){return e.stopPropagation()},children:t})})})},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=u(t,2),i=n[0],a=n[1],o=function(){return a(!0)},s=function(){return a(!1)};return[i,o,s]},Je=n(716),Ze=n(409),et="cardModal_container__udTZj",tt="cardModal_inputsGroups__w5Eso",nt="cardModal_buttonGroups__hc8pE",rt="cardModal_notification__TgVV8",it="cardModal_show__HU5eO",at=function(e){var t=e.closeModal,n=e.id,r=e.handleDeleteImage,i=e.handleChange,a=e.idW,o=e.notification,s=e.isError;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:et,children:[(0,c.jsx)("h2",{children:"Are you sure?"}),(0,c.jsxs)("div",{className:o?"".concat(rt," ").concat(it):rt,children:[(0,c.jsx)("p",{children:s?"the id entered is wrong":"the image has been deleted"}),(0,c.jsx)("img",{src:s?Je:Ze,alt:"warning"})]}),(0,c.jsxs)("div",{className:tt,children:[(0,c.jsxs)("p",{children:["Please type ",(0,c.jsx)("span",{children:n})," to confirm."]}),(0,c.jsx)("input",{value:a,onChange:i,type:"password"})]}),(0,c.jsxs)("div",{className:nt,children:[(0,c.jsx)("button",{onClick:t,children:"Cancel"}),(0,c.jsx)("button",{onClick:r,children:"Delete"})]})]})})},ot=function(e){var t=e.closeModal,n=e.id,i=(0,r.useContext)(h),a=i.setImages,o=i.images,s=u((0,r.useState)(""),2),l=s[0],f=s[1],d=u((0,r.useState)(!1),2),p=d[0],v=d[1],y=u((0,r.useState)(!1),2),m=y[0],g=y[1];return(0,c.jsx)(at,{isError:m,handleDeleteImage:function(){n===l?(!function(e){var t="https://powerful-forest-65007.herokuapp.com/image/".concat(e);fetch(t,{method:"DELETE"}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(n),a(o.filter((function(e){return e.id!==n}))),g(!1),v(!0),setTimeout((function(){v(!1)}),5e3)):(g(!0),v(!0),setTimeout((function(){v(!1)}),5e3))},handleChange:function(e){f(e.target.value)},idW:l,closeModal:t,id:n,notification:p})},st=function(e){var t=e.id,n=u($e(!1),3),r=n[0],i=n[1],a=n[2];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:Ge,children:(0,c.jsx)("button",{onClick:i,children:"delete"})}),(0,c.jsx)(Xe,{isOpen:r,closeModal:a,children:(0,c.jsx)(ot,{closeModal:a,id:t})})]})},ut=function(e){var t=e.element,n=u((0,r.useState)(!1),2),i=n[0],a=n[1],o=function(){a(!i)};return(0,c.jsxs)("div",{onMouseEnter:o,onMouseLeave:o,className:He,children:[(0,c.jsx)("img",{src:t.url,alt:t}),(0,c.jsxs)("div",{className:i?"".concat(We," ").concat(Ye):"".concat(We),children:[(0,c.jsx)(st,{id:t.id}),(0,c.jsx)("div",{className:Qe,children:(0,c.jsx)("h2",{children:t.label})})]})]})},ct=function(e){var t=e.item;return(0,c.jsx)("div",{className:Ke,children:t&&t.map((function(e,t){return(0,c.jsx)(ut,{element:e},t)}))})},lt=function(){var e=(0,r.useContext)(h),t=e.images,n=e.setImages,i=e.keyboard;(0,r.useEffect)((function(){return fetch(g).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(e){console.log(e)})).then((function(e){return n(e)})),qe.on("loadImage",(function(e){n(e)})),function(){qe.off()}}),[]);var a=function(e,t){console.log(e);var n=u((0,r.useState)([]),2),i=n[0],a=n[1],o=u((0,r.useState)([]),2),s=o[0],c=o[1],l=u((0,r.useState)([]),2),f=l[0],h=l[1],p=u((0,r.useState)(!1),2),v=p[0],y=p[1],m=u((0,r.useState)([]),2),g=m[0],k=m[1],b=u((0,r.useState)(3),2),w=b[0],_=b[1],E=function(){window.innerWidth>700&&(_(3),console.log("log3")),window.innerWidth<=700&&_(2),window.innerWidth<=375&&_(2)};return(0,r.useEffect)((function(){window.addEventListener("resize",E)}),[]),(0,r.useEffect)((function(){a([]),c([]),h([]),k([]);for(var t=function(t){for(var n=function(n){e[t*w+n]&&(0===n&&(console.log(t*w+n+" "+e[t*w+n]),a((function(r){return[].concat(d(r),[e[t*w+n]])}))),3!==w&&2!==w||1===n&&c((function(r){return[].concat(d(r),[e[t*w+n]])})),3===w&&2===n&&h((function(r){return[].concat(d(r),[e[t*w+n]])})))},r=0;r<w;r++)n(r)},n=0;n<Math.ceil(e.length/w);n++)t(n);y(!v),console.log("entra3")}),[e,w]),(0,r.useEffect)((function(){3===w&&(t||i.length&&s.length&&f.length)&&k((function(e){return[].concat(d(e),[i,s,f])})),2===w&&(console.log("entra2"),(t||i.length&&s.length)&&k((function(e){return[].concat(d(e),[i,s])}))),1===w&&(console.log("entra2"),(t||i.length)&&k((function(e){return[].concat(d(e),[i])})))}),[v]),[g]}(t,i),o=u(a,1)[0];return(0,c.jsx)("div",{className:ze,children:o&&o.map((function(e,t){return(0,c.jsx)(ct,{item:e},t)}))})},ft="nav-bar_container__AI4Jp",ht="nav-bar_container__left__5F9HW",dt="nav-bar_container__left__profile__Lnttg",pt="nav-bar_container__left__profile__logo__PQeUp",vt="nav-bar_container__left__profile__logo__item__Gk8iD",yt="nav-bar_container__left__profile__title__Iwgor",mt="nav-bar_container__left__search__EcVV0",gt="nav-bar_container__right__2atoF",kt=n(305),bt=function(){var e=(0,r.useContext)(h),t=e.setImages,n=e.keyboard,i=e.setKeyboard;(0,r.useEffect)((function(){var e;n&&(e=n,fetch("".concat(g,"/label/").concat(e)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(e){console.log(e)}))).then((function(e){return e?t(e):null}))}),[n]);return(0,c.jsxs)("div",{className:mt,children:[(0,c.jsx)("input",{placeholder:"Search by name",value:n,onChange:function(e){i(e.target.value)},type:"text"}),(0,c.jsx)("img",{src:kt,alt:"logo"})]})},wt="cardModal_container__+bK1q",_t="cardModal_inputsGroups__wUi-v",Et="cardModal_input__4+F9B",xt="cardModal_button__Rao4j",St="cardModal_checkboxGroups__XRYuF",Tt="cardModal_checkbox__pagRy",It="cardModal_buttonGroups__bjPEq",Ct="cardModal_none__YEWPF",At="cardModal_notification__X0rVI",Nt="cardModal_show__5NWMR",Rt=function(e){var t=e.handleClick,n=e.handleSubmit,r=e.handleIsUpload,i=e.handleFile,a=e.handleLabel,o=e.handleUrl,s=e.handleIsUrl,u=e.isUrl,l=e.isUpload,f=e.notification,h=e.label,d=e.hiddenFileInput,p=e.closeModal;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:wt,children:[(0,c.jsx)("h2",{children:"Add a new photo"}),(0,c.jsxs)("div",{className:f?"".concat(At," ").concat(Nt):At,children:[(0,c.jsx)("p",{children:"the provided url is not valid"}),(0,c.jsx)("img",{src:Je,alt:"warning"})]}),(0,c.jsxs)("div",{className:_t,children:[(0,c.jsxs)("div",{className:Et,children:[(0,c.jsx)("p",{children:"Label"}),(0,c.jsx)("input",{onChange:a,value:h,type:"text"})]}),(0,c.jsxs)("div",{className:St,children:[(0,c.jsxs)("div",{className:Tt,children:[(0,c.jsx)("input",{onChange:s,checked:u,type:"checkbox"}),(0,c.jsx)("p",{children:"Url Photo"})]}),(0,c.jsxs)("div",{className:Tt,children:[(0,c.jsx)("input",{onChange:r,checked:l,type:"checkbox"}),(0,c.jsx)("p",{children:"Uploaded Photo"})]})]}),u?(0,c.jsxs)("div",{className:Et,children:[(0,c.jsx)("p",{children:"Photo URL"}),(0,c.jsx)("input",{onBlur:o,type:"text"})]}):l?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:t,type:"button",className:xt,children:"Choose file"}),(0,c.jsx)("input",{ref:d,onChange:i,type:"file",className:Ct})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:t,type:"button",onChange:i,className:xt,children:"Choose file"}),(0,c.jsx)("input",{ref:d,onChange:i,type:"file",className:Ct})]})]}),(0,c.jsxs)("div",{className:It,children:[(0,c.jsx)("button",{onClick:p,children:"Cancel"}),(0,c.jsx)("button",{onClick:n,children:"Submit"})]})]})})};function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t,n){return Ot=A()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&T(i,n.prototype),i},Ot.apply(null,arguments)}function Lt(e){var t="function"===typeof Map?new Map:void 0;return Lt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ot(e,arguments,C(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,e)},Lt(e)}var Pt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Mt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ft=function(e){return function(e){var t=Pt(e);return Mt.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function Ut(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ut(e[n],t[n]));return e}var jt=function(){function e(){var t=this;_(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return x(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Bt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ft(JSON.stringify({alg:"none",type:"JWT"})),Ft(JSON.stringify(a)),""].join(".")}function Vt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qt(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var zt=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(S(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(S(a),Kt.prototype.create),a}return x(n)}(Lt(Error)),Kt=function(){function e(t,n,r){_(this,e),this.service=t,this.serviceName=n,this.errors=r}return x(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ht(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new zt(n,a,t);return o}}]),e}();function Ht(e,t){return e.replace(Wt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Wt=/\{\$([^}]+)}/g;function Gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Yt(s)&&Yt(u)){if(!Qt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Yt(e){return null!==e&&"object"===typeof e}function Xt(e,t){var n=new $t(e,t);return n.subscribe.bind(n)}var $t=function(){function e(t,n){var r=this;_(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return x(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ke(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Jt),void 0===r.error&&(r.error=Jt),void 0===r.complete&&(r.complete=Jt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Jt(){}function Zt(e){return e&&e._delegate?e._delegate:e}var en=function(){function e(t,n,r){_(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return x(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),tn="[DEFAULT]",nn=function(){function e(t,n){_(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return x(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new jt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:tn})}catch(c){}var t,n=ke(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=v(y.mark((function e(){var t;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(d(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),d(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ke(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ke(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ag){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===tn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ag){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;return this.component?this.component.multipleInstances?e:tn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var rn,an,on=function(){function e(t){_(this,e),this.name=t,this.providers=new Map}return x(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new nn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),sn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(an||(an={}));var un,cn,ln={debug:an.DEBUG,verbose:an.VERBOSE,info:an.INFO,warn:an.WARN,error:an.ERROR,silent:an.SILENT},fn=an.INFO,hn=(Dt(rn={},an.DEBUG,"log"),Dt(rn,an.VERBOSE,"log"),Dt(rn,an.INFO,"info"),Dt(rn,an.WARN,"warn"),Dt(rn,an.ERROR,"error"),rn),dn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=hn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},pn=function(){function e(t){_(this,e),this.name=t,this._logLevel=fn,this._logHandler=dn,this._userLogHandler=null,sn.push(this)}return x(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in an))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ln[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,an.DEBUG].concat(t)),this._logHandler.apply(this,[this,an.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,an.VERBOSE].concat(t)),this._logHandler.apply(this,[this,an.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,an.INFO].concat(t)),this._logHandler.apply(this,[this,an.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,an.WARN].concat(t)),this._logHandler.apply(this,[this,an.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,an.ERROR].concat(t)),this._logHandler.apply(this,[this,an.ERROR].concat(t))}}]),e}();var vn=function(){function e(t){_(this,e),this.container=t}return x(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var yn="@firebase/app",mn="0.7.15",gn=new pn("@firebase/app"),kn="[DEFAULT]",bn=(Dt(un={},yn,"fire-core"),Dt(un,"@firebase/app-compat","fire-core-compat"),Dt(un,"@firebase/analytics","fire-analytics"),Dt(un,"@firebase/analytics-compat","fire-analytics-compat"),Dt(un,"@firebase/app-check","fire-app-check"),Dt(un,"@firebase/app-check-compat","fire-app-check-compat"),Dt(un,"@firebase/auth","fire-auth"),Dt(un,"@firebase/auth-compat","fire-auth-compat"),Dt(un,"@firebase/database","fire-rtdb"),Dt(un,"@firebase/database-compat","fire-rtdb-compat"),Dt(un,"@firebase/functions","fire-fn"),Dt(un,"@firebase/functions-compat","fire-fn-compat"),Dt(un,"@firebase/installations","fire-iid"),Dt(un,"@firebase/installations-compat","fire-iid-compat"),Dt(un,"@firebase/messaging","fire-fcm"),Dt(un,"@firebase/messaging-compat","fire-fcm-compat"),Dt(un,"@firebase/performance","fire-perf"),Dt(un,"@firebase/performance-compat","fire-perf-compat"),Dt(un,"@firebase/remote-config","fire-rc"),Dt(un,"@firebase/remote-config-compat","fire-rc-compat"),Dt(un,"@firebase/storage","fire-gcs"),Dt(un,"@firebase/storage-compat","fire-gcs-compat"),Dt(un,"@firebase/firestore","fire-fst"),Dt(un,"@firebase/firestore-compat","fire-fst-compat"),Dt(un,"fire-js","fire-js"),Dt(un,"firebase","fire-js-all"),un),wn=new Map,_n=new Map;function En(e,t){try{e.container.addComponent(t)}catch(n){gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function xn(e,t){e.container.addOrOverwriteComponent(t)}function Sn(e){var t=e.name;if(_n.has(t))return gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;_n.set(t,e);var n,r=ke(wn.values());try{for(r.s();!(n=r.n()).done;){En(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Tn(e,t){return e.container.getProvider(t)}function In(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kn;Tn(e,t).clearInstance(n)}function Cn(){_n.clear()}var An,Nn,Rn=(Dt(cn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Dt(cn,"bad-app-name","Illegal App name: '{$appName}"),Dt(cn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Dt(cn,"app-deleted","Firebase App named '{$appName}' already deleted"),Dt(cn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Dt(cn,"invalid-log-argument","First argument to `onLog` must be null or a function."),cn),Dn=new Kt("app","Firebase",Rn),On=function(){function e(t,n,r){var i=this;_(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new en("app",(function(){return i}),"PUBLIC"))}return x(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}]),e}(),Ln="9.6.5";function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:kn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dn.create("bad-app-name",{appName:String(i)});var a=wn.get(i);if(a){if(Qt(e,a.options)&&Qt(r,a.config))return a;throw Dn.create("duplicate-app",{appName:i})}var o,s=new on(i),u=ke(_n.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new On(e,r,s);return wn.set(i,l),l}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn,t=wn.get(e);if(!t)throw Dn.create("no-app",{appName:e});return t}function Fn(){return Array.from(wn.values())}function Un(e){return jn.apply(this,arguments)}function jn(){return jn=v(y.mark((function e(t){var n;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!wn.has(n)){e.next=6;break}return wn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function Bn(e,t,n){var r,i=null!==(r=bn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void gn.warn(s.join(" "))}Sn(new en("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Vn(e,t){if(null!==e&&"function"!==typeof e)throw Dn.create("invalid-log-argument");!function(e,t){var n,r=ke(sn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ln[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:an[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function qn(e){var t;t=e,sn.forEach((function(e){e.setLogLevel(t)}))}An="",Sn(new en("platform-logger",(function(e){return new vn(e)}),"PRIVATE")),Bn(yn,mn,An),Bn(yn,mn,"esm2017"),Bn("fire-js","");var zn=function(){function e(t,n){var r=this;_(this,e),this._delegate=t,this.firebase=n,En(t,new en("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return x(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Un(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){En(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){xn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Kn=(Dt(Nn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Dt(Nn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Nn),Hn=new Kt("app-compat","Firebase",Kn);var Wn=function e(){var n=function(e){var n={},r={__esModule:!0,initializeApp:function(t){var i=Pn(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Gt(n,i.name))return n[i.name];var a=new e(i,r);return n[i.name]=a,a},app:i,registerVersion:Bn,setLogLevel:qn,onLog:Vn,apps:null,SDK_VERSION:Ln,INTERNAL:{registerComponent:function(t){var n=t.name,a=n.replace("-compat","");if(Sn(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Hn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==t.serviceProps&&Ut(o,t.serviceProps),r[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!Gt(n,e=e||kn))throw Hn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=e,r}(zn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Ut(n,e)},createSubscribe:Xt,ErrorFactory:Kt,deepExtend:Ut}),n}(),Gn=new pn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Gn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qn=self.firebase.SDK_VERSION;Qn&&Qn.indexOf("LITE")>=0&&Gn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yn=Wn;!function(e){Bn("@firebase/app-compat","0.1.16",e)}();Yn.registerVersion("firebase","9.6.5","app-compat");var Xn="firebasestorage.googleapis.com",$n=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,Jn(e),"Firebase Storage: ".concat(r," (").concat(Jn(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(S(i),n.prototype),i}return x(n,[{key:"_codeEquals",value:function(e){return Jn(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(zt);function Jn(e){return"storage/"+e}function Zn(){return new $n("unknown","An unknown error occurred, please check the error payload for server response.")}function er(){return new $n("canceled","User canceled the upload/download.")}function tr(){return new $n("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function nr(e){return new $n("invalid-argument",e)}function rr(){return new $n("app-deleted","The Firebase app was deleted.")}function ir(e){return new $n("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ar(e,t){return new $n("invalid-format","String does not match format '"+e+"': "+t)}function or(e){throw new $n("internal-error","Internal error: "+e)}var sr,ur=function(){function e(t,n){_(this,e),this.bucket=t,this.path_=n}return x(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new $n("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Xn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new $n("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),cr=function(){function e(t){_(this,e),this.promise_=Promise.reject(t)}return x(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function lr(e){return"string"===typeof e||e instanceof String}function fr(e){return hr()&&e instanceof Blob}function hr(){return"undefined"!==typeof Blob}function dr(e,t,n,r){if(r<t)throw nr("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw nr("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function pr(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function vr(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(sr||(sr={}));var yr=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this;_(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return x(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Zn();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?rr():er());else i(new $n("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new mr(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new mr(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===sr.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new mr(o,r))}else{var s=r.getErrorCode()===sr.ABORT;t(!1,new mr(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),mr=x((function e(t,n,r){_(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function gr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function kr(){for(var e=gr(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(hr())return new Blob(n);throw new $n("unsupported-environment","This browser doesn't seem to support creating Blobs")}var br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wr=x((function e(t,n){_(this,e),this.data=t,this.contentType=n||null}));function _r(e,t){switch(e){case br.RAW:return new wr(Er(t));case br.BASE64:case br.BASE64URL:return new wr(xr(e,t));case br.DATA_URL:return new wr(function(e){var t=new Sr(e);return t.base64?xr(br.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw ar(br.DATA_URL,"Malformed data URL.")}return Er(t)}(t.rest)}(t),new Sr(t).contentType)}throw Zn()}function Er(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xr(e,t){switch(e){case br.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ar(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case br.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw ar(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw ar(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Sr=x((function e(t){_(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw ar(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Tr=function(){function e(t,n){_(this,e);var r=0,i="";fr(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return x(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(fr(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(hr()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(kr.apply(null,i))}var a=n.map((function(e){return lr(e)?_r(br.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Ir(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Cr(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ar(e,t){return t}var Nr=x((function e(t,n,r,i){_(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ar})),Rr=null;function Dr(){if(Rr)return Rr;var e=[];e.push(new Nr("bucket")),e.push(new Nr("generation")),e.push(new Nr("metageneration")),e.push(new Nr("name","fullPath",!0));var t=new Nr("name");t.xform=function(e,t){return function(e){return!lr(e)||e.length<2?e:Cr(e)}(t)},e.push(t);var n=new Nr("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Nr("timeCreated")),e.push(new Nr("updated")),e.push(new Nr("md5Hash",null,!0)),e.push(new Nr("cacheControl",null,!0)),e.push(new Nr("contentDisposition",null,!0)),e.push(new Nr("contentEncoding",null,!0)),e.push(new Nr("contentLanguage",null,!0)),e.push(new Nr("contentType",null,!0)),e.push(new Nr("metadata","customMetadata",!0)),Rr=e}function Or(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ur(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Lr(e,t,n){var r=Ir(t);return null===r?null:Or(e,r,n)}function Pr(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Mr(e,t,n){var r=Ir(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ke(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new ur(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var u,c=ke(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new ur(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Fr=x((function e(t,n,r,i){_(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Ur(e){if(!e)throw Zn()}function jr(e,t){return function(n,r){var i=Lr(e,r,t);return Ur(null!==i),i}}function Br(e,t){return function(n,r){var i=Lr(e,r,t);return Ur(null!==i),function(e,t,n,r){var i=Ir(t);if(null===i)return null;if(!lr(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return pr("/b/"+o(i)+"/o/"+o(a),n,r)+vr({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Vr(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new $n("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new $n("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new $n("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new $n("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function qr(e){var t=Vr(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new $n("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function zr(e,t,n){var r=pr(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Fr(r,"GET",jr(e,n),i);return a.errorHandler=qr(t),a}function Kr(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=pr(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Fr(o,"GET",function(e,t){return function(n,r){var i=Mr(e,t,r);return Ur(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Vr(t),u}function Hr(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wr(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Hr(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Pr(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=Tr.getBlob(c,r,l);if(null===f)throw tr();var h={name:u.fullPath},d=pr(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Fr(d,"POST",jr(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Vr(t),v}var Gr=x((function e(t,n,r,i){_(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Qr(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ur(!1)}return Ur(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Yr=262144;function Xr(e,t,n,r,i,a,o,s){var u=new Gr(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new $n("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw tr();var v=t.maxUploadRetryTime,y=new Fr(n,"POST",(function(e,n){var i,o=Qr(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?jr(t,a)(e,n):null,new Gr(s,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=Vr(e),y}var $r={STATE_CHANGED:"state_changed"},Jr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zr(e){switch(e){case"running":case"pausing":case"canceling":return Jr.RUNNING;case"paused":return Jr.PAUSED;case"success":return Jr.SUCCESS;case"canceled":return Jr.CANCELED;default:return Jr.ERROR}}var ei=x((function e(t,n,r){_(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function ti(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var ni=function(){function e(){var t=this;_(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sr.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=sr.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=sr.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return x(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw or("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw or("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw or("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw or("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw or("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),ri=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(ni);function ii(){return new ri}var ai=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Dr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return x(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=u(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Hr(t,r,i),s={name:o.fullPath},u=pr(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Pr(o,n),f=e.maxUploadRetryTime,h=new Fr(u,"POST",(function(e){var t;Qr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Ur(!1)}return Ur(lr(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=Vr(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,ii,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Fr(n,"POST",(function(e){var t=Qr(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Ur(!1)}n||Ur(!1);var i=Number(n);return Ur(!isNaN(i)),new Gr(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Vr(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,ii,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Yr*this._chunkMultiplier,n=new Gr(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Xr(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,ii,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){Yr*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=zr(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,ii,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Wr(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,ii,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=er(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Zr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new ei(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Zr(this._state)){case Jr.SUCCESS:ti(this._resolve.bind(null,this.snapshot))();break;case Jr.CANCELED:case Jr.ERROR:ti(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Zr(this._state)){case Jr.RUNNING:case Jr.PAUSED:e.next&&ti(e.next.bind(e,this.snapshot))();break;case Jr.SUCCESS:e.complete&&ti(e.complete.bind(e))();break;default:e.error&&ti(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),oi=function(){function e(t,n){_(this,e),this._service=t,this._location=n instanceof ur?n:ur.makeFromUrl(n,t.host)}return x(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new ur(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Cr(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ur(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw ir(e)}}]),e}();function si(e,t,n){return ui.apply(this,arguments)}function ui(){return(ui=v(m().mark((function e(t,n,r){var i,a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,ci(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,d(s.prefixes)),(a=n.items).push.apply(a,d(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,si(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ci(e,t){null!=t&&"number"===typeof t.maxResults&&dr("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Kr(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ii)}function li(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=pr(t.fullServerUrl(),e.host,e._protocol),a=Pr(n,r),o=e.maxOperationRetryTime,s=new Fr(i,"PATCH",jr(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=qr(t),s}(e.storage,e._location,t,Dr());return e.storage.makeRequestWithTokens(n,ii)}function fi(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=pr(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Fr(r,"GET",Br(e,n),i);return a.errorHandler=qr(t),a}(e.storage,e._location,Dr());return e.storage.makeRequestWithTokens(t,ii).then((function(e){if(null===e)throw new $n("no-download-url","The given file does not have any download URLs.");return e}))}function hi(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=pr(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Fr(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=qr(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ii)}function di(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ur(e._location.bucket,n);return new oi(e.storage,r)}function pi(e,t){if(e instanceof gi){var n=e;if(null==n._bucket)throw new $n("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new oi(n,n._bucket);return null!=t?pi(r,t):r}return void 0!==t?di(e,t):e}function vi(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof gi)return function(e,t){return new oi(e,t)}(e,t);throw nr("To use ref(service, url), the first argument must be a Storage instance.")}return pi(e,t)}function yi(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:ur.makeFromBucketSpec(n,e)}function mi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Bt(i,e.app.options.projectId))}var gi=function(){function e(t,n,r,i,a){_(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Xn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ur.makeFromBucketSpec(i,this._host):yi(this._host,this.app.options)}return x(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=ur.makeFromBucketSpec(this._url,e):this._bucket=yi(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){dr("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){dr("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=v(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=v(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new oi(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new cr(rr());var a=function(e,t,n,r,i,a){var o=vr(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new yr(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=v(m().mark((function e(t,n){var r,i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=u(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ki="@firebase/storage",bi="0.9.2",wi="storage";function _i(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ai(e,new Tr(t),n)}(e=Zt(e),t,n)}function Ei(e){return function(e){e._throwIfRoot("getMetadata");var t=zr(e.storage,e._location,Dr());return e.storage.makeRequestWithTokens(t,ii)}(e=Zt(e))}function xi(e){return function(e){var t={prefixes:[],items:[]};return si(e,t).then((function(){return t}))}(e=Zt(e))}function Si(e,t){return vi(e=Zt(e),t)}function Ti(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};mi(e,t,n,r)}function Ii(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new gi(r,i,a,n,Ln)}Sn(new en(wi,Ii,"PUBLIC").setMultipleInstances(!0)),Bn(ki,bi,""),Bn(ki,bi,"esm2017");var Ci=function(){function e(t,n,r){_(this,e),this._delegate=t,this.task=n,this.ref=r}return x(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Ai=function(){function e(t,n){_(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return x(e,[{key:"snapshot",get:function(){return new Ci(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ci(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Ci(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ci(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Ni=function(){function e(t,n){_(this,e),this._delegate=t,this._service=n}return x(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ri(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Ri(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Ri=function(){function e(t,n){_(this,e),this._delegate=t,this.storage=n}return x(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return di(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Ai(_i(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:br.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=_r(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ai(new ai(this._delegate,new Tr(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return xi(this._delegate).then((function(t){return new Ni(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return ci(e=Zt(e),t)}(this._delegate,e||void 0).then((function(e){return new Ni(e,t.storage)}))}},{key:"getMetadata",value:function(){return Ei(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return li(e=Zt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return fi(Zt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),hi(Zt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw ir(e)}}]),e}(),Di=function(){function e(t,n){_(this,e),this.app=t,this._delegate=n}return x(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Oi(e))throw nr("ref() expected a child path but got a URL, use refFromURL instead.");return new Ri(Si(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Oi(e))throw nr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ur.makeFromUrl(e,this._delegate.host)}catch(t){throw nr("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ri(Si(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ti(this._delegate,e,t,n)}}]),e}();function Oi(e){return/^[A-Za-z]+:\/\//.test(e)}function Li(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Di(r,i)}!function(e){var t={TaskState:Jr,TaskEvent:$r,StringFormat:br,Storage:Di,Reference:Ri};e.INTERNAL.registerComponent(new en("storage-compat",Li,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.10")}(Yn);var Pi,Mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Fi={},Ui=Ui||{},ji=Mi||self;function Bi(){}function Vi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function qi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var zi="closure_uid_"+(1e9*Math.random()>>>0),Ki=0;function Hi(e,t,n){return e.call.apply(e.bind,arguments)}function Wi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Gi(e,t,n){return(Gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hi:Wi).apply(null,arguments)}function Qi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yi(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Xi(){this.s=this.s,this.o=this.o}var $i={};Xi.prototype.s=!1,Xi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,zi)&&e[zi]||(e[zi]=++Ki)}(this);delete $i[e]}},Xi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ji=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Zi=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ea(e){return Array.prototype.concat.apply([],arguments)}function ta(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function na(e){return/^[\s\xa0]*$/.test(e)}var ra,ia=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function aa(e,t){return-1!=e.indexOf(t)}function oa(e,t){return e<t?-1:e>t?1:0}e:{var sa=ji.navigator;if(sa){var ua=sa.userAgent;if(ua){ra=ua;break e}}ra=""}function ca(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function la(e){var t={};for(var n in e)t[n]=e[n];return t}var fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ha(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<fa.length;a++)n=fa[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function da(e){return da[" "](e),e}da[" "]=Bi;var pa,va=aa(ra,"Opera"),ya=aa(ra,"Trident")||aa(ra,"MSIE"),ma=aa(ra,"Edge"),ga=ma||ya,ka=aa(ra,"Gecko")&&!(aa(ra.toLowerCase(),"webkit")&&!aa(ra,"Edge"))&&!(aa(ra,"Trident")||aa(ra,"MSIE"))&&!aa(ra,"Edge"),ba=aa(ra.toLowerCase(),"webkit")&&!aa(ra,"Edge");function wa(){var e=ji.document;return e?e.documentMode:void 0}e:{var _a="",Ea=function(){var e=ra;return ka?/rv:([^\);]+)(\)|;)/.exec(e):ma?/Edge\/([\d\.]+)/.exec(e):ya?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ba?/WebKit\/(\S+)/.exec(e):va?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ea&&(_a=Ea?Ea[1]:""),ya){var xa=wa();if(null!=xa&&xa>parseFloat(_a)){pa=String(xa);break e}}pa=_a}var Sa,Ta={};function Ia(){return function(e){var t=Ta;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ia(String(pa)).split("."),n=ia("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=oa(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||oa(0==a[2].length,0==o[2].length)||oa(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(ji.document&&ya){var Ca=wa();Sa=Ca||(parseInt(pa,10)||void 0)}else Sa=void 0;var Aa=Sa,Na=function(){if(!ji.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ji.addEventListener("test",Bi,t),ji.removeEventListener("test",Bi,t)}catch(n){}return e}();function Ra(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Da(e,t){if(Ra.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ka){e:{try{da(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Oa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Da.Z.h.call(this)}}Ra.prototype.h=function(){this.defaultPrevented=!0},Yi(Da,Ra);var Oa={2:"touch",3:"pen",4:"mouse"};Da.prototype.h=function(){Da.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),Pa=0;function Ma(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Pa,this.ca=this.fa=!1}function Fa(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ua(e){this.src=e,this.g={},this.h=0}function ja(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ji(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Fa(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ba(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Ua.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ba(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ma(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Va="closure_lm_"+(1e6*Math.random()|0),qa={};function za(e,t,n,r,i){if(r&&r.once)return Ha(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)za(e,t[a],n,r,i);return null}return n=Ja(n),e&&e[La]?e.N(t,n,qi(r)?!!r.capture:!!r,i):Ka(e,t,n,!1,r,i)}function Ka(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=qi(i)?!!i.capture:!!i,s=Xa(e);if(s||(e[Va]=s=new Ua(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ya;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Na||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qa(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ha(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ha(e,t[a],n,r,i);return null}return n=Ja(n),e&&e[La]?e.O(t,n,qi(r)?!!r.capture:!!r,i):Ka(e,t,n,!0,r,i)}function Wa(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wa(e,t[a],n,r,i);else r=qi(r)?!!r.capture:!!r,n=Ja(n),e&&e[La]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ba(a=e.g[t],n,r,i))&&(Fa(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Xa(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ba(t,n,r,i)),(n=-1<e?t[e]:null)&&Ga(n))}function Ga(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[La])ja(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qa(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xa(t))?(ja(n,e),0==n.h&&(n.src=null,t[Va]=null)):Fa(e)}}}function Qa(e){return e in qa?qa[e]:qa[e]="on"+e}function Ya(e,t){if(e.ca)e=!0;else{t=new Da(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ga(e),e=n.call(r,t)}return e}function Xa(e){return(e=e[Va])instanceof Ua?e:null}var $a="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ja(e){return"function"===typeof e?e:(e[$a]||(e[$a]=function(t){return e.handleEvent(t)}),e[$a])}function Za(){Xi.call(this),this.i=new Ua(this),this.P=this,this.I=null}function eo(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ra(t,e);else if(t instanceof Ra)t.target=t.target||e;else{var i=t;ha(t=new Ra(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=to(o,r,!0,t)&&i}if(i=to(o=t.g=e,r,!0,t)&&i,i=to(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=to(o=t.g=n[a],r,!1,t)&&i}function to(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&ja(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Yi(Za,Xi),Za.prototype[La]=!0,Za.prototype.removeEventListener=function(e,t,n,r){Wa(this,e,t,n,r)},Za.prototype.M=function(){if(Za.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fa(n[r]);delete t.g[e],t.h--}}this.I=null},Za.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Za.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var no=ji.JSON.stringify;function ro(){var e=fo,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var io,ao=function(){function e(){_(this,e),this.h=this.g=null}return x(e,[{key:"add",value:function(e,t){var n=oo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),oo=new(function(){function e(t,n){_(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return x(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new so}),(function(e){return e.reset()})),so=function(){function e(){_(this,e),this.next=this.g=this.h=null}return x(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function uo(e){ji.setTimeout((function(){throw e}),0)}function co(e,t){io||function(){var e=ji.Promise.resolve(void 0);io=function(){e.then(ho)}}(),lo||(io(),lo=!0),fo.add(e,t)}var lo=!1,fo=new ao;function ho(){for(var e;e=ro();){try{e.h.call(e.g)}catch(n){uo(n)}var t=oo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}lo=!1}function po(e,t){Za.call(this),this.h=e||1,this.g=t||ji,this.j=Gi(this.kb,this),this.l=Date.now()}function vo(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function yo(e,t,n){if("function"===typeof e)n&&(e=Gi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Gi(e.handleEvent,e)}return 2147483647<Number(t)?-1:ji.setTimeout(e,t||0)}function mo(e){e.g=yo((function(){e.g=null,e.i&&(e.i=!1,mo(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yi(po,Za),(Pi=po.prototype).da=!1,Pi.S=null,Pi.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),eo(this,"tick"),this.da&&(vo(this),this.start()))}},Pi.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pi.M=function(){po.Z.M.call(this),vo(this),delete this.g};var go=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return x(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:mo(this)}},{key:"M",value:function(){q(C(n.prototype),"M",this).call(this),this.g&&(ji.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Xi);function ko(e){Xi.call(this),this.h=e,this.g={}}Yi(ko,Xi);var bo=[];function wo(e,t,n,r){Array.isArray(n)||(n&&(bo[0]=n.toString()),n=bo);for(var i=0;i<n.length;i++){var a=za(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function _o(e){ca(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ga(e)}),e),e.g={}}function Eo(){this.g=!0}function xo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return no(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ko.prototype.M=function(){ko.Z.M.call(this),_o(this)},ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eo.prototype.Aa=function(){this.g=!1},Eo.prototype.info=function(){};var So={},To=null;function Io(){return To=To||new Za}function Co(e){Ra.call(this,So.Ma,e)}function Ao(e){var t=Io();eo(t,new Co(t,e))}function No(e,t){Ra.call(this,So.STAT_EVENT,e),this.stat=t}function Ro(e){var t=Io();eo(t,new No(t,e))}function Do(e,t){Ra.call(this,So.Na,e),this.size=t}function Oo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ji.setTimeout((function(){e()}),t)}So.Ma="serverreachability",Yi(Co,Ra),So.STAT_EVENT="statevent",Yi(No,Ra),So.Na="timingevent",Yi(Do,Ra);var Lo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Po={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Mo(){}function Fo(e){return e.h||(e.h=e.i())}function Uo(){}Mo.prototype.h=null;var jo,Bo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vo(){Ra.call(this,"d")}function qo(){Ra.call(this,"c")}function zo(){}function Ko(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ko(this),this.P=Wo,e=ga?125:void 0,this.W=new po(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ho}function Ho(){this.i=null,this.g="",this.h=!1}Yi(Vo,Ra),Yi(qo,Ra),Yi(zo,Mo),zo.prototype.g=function(){return new XMLHttpRequest},zo.prototype.i=function(){return{}},jo=new zo;var Wo=45e3,Go={},Qo={};function Yo(e,t,n){e.K=1,e.v=gs(hs(t)),e.s=n,e.U=!0,Xo(e,null)}function Xo(e,t){e.F=Date.now(),es(e),e.A=hs(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Rs(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ho,e.g=Ou(e.l,n?t:null,!e.s),0<e.O&&(e.L=new go(Gi(e.Ia,e,e.g),e.O)),wo(e.V,e.g,"readystatechange",e.gb),t=e.H?la(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ao(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function $o(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Jo(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Zo(e,n))==Qo){4==t&&(e.o=4,Ro(14),i=!1),xo(e.j,e.m,null,"[Incomplete Response]");break}if(r==Go){e.o=4,Ro(15),xo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xo(e.j,e.m,r,null),as(e,r)}$o(e)&&r!=Qo&&r!=Go&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ro(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Su(t),t.L=!0,Ro(11))):(xo(e.j,e.m,n,"[Invalid Chunked Response]"),is(e),rs(e))}function Zo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qo:(n=Number(t.substring(n,r)),isNaN(n)?Go:(r+=1)+n>t.length?Qo:(t=t.substr(r,n),e.C=r+n,t))}function es(e){e.Y=Date.now()+e.P,ts(e,e.P)}function ts(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Oo(Gi(e.eb,e),t)}function ns(e){e.B&&(ji.clearTimeout(e.B),e.B=null)}function rs(e){0==e.l.G||e.I||Cu(e.l,e)}function is(e){ns(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,vo(e.W),_o(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function as(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||js(n.i,e)))if(n.I=e.N,!e.J&&js(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Iu(n),yu(n)}xu(n),Ro(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Oo(Gi(n.ab,n),6e3));if(1>=Us(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Nu(n,11)}else if((e.J||n.g==e)&&Iu(n),!na(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(aa(l,"spdy")||aa(l,"quic")||aa(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Bs(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,ms(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Du(r,r.H?r.la:null,r.W),d.J){Vs(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ns(p),es(p)),r.g=d}else Eu(r);0<n.l.length&&ku(n)}else"stop"!=a[0]&&"close"!=a[0]||Nu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Nu(n,7):vu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ao(4)}catch(a){}}function os(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Vi(e)||"string"===typeof e)Zi(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Vi(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Vi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ss(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ss)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function us(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];cs(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)cs(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function cs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Pi=Ko.prototype).setTimeout=function(e){this.P=e},Pi.gb=function(e){e=e.target;var t=this.L;t&&3==lu(e)?t.l():this.Ia(e)},Pi.Ia=function(e){try{if(e==this.g)e:{var t=lu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ga||this.g&&(this.h.h||this.g.ga()||fu(this.g)))){this.I||4!=t||7==n||Ao(8==n||0>=r?3:2),ns(this);var i=this.g.ba();this.N=i;t:if($o(this)){var a=fu(this.g);e="";var o=a.length,s=4==lu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){is(this),rs(this);var u="";break t}this.h.i=new ji.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!na(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ro(12),is(this),rs(this);break e}xo(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,as(this,i)}this.U?(Jo(this,t,u),ga&&this.i&&3==t&&(wo(this.V,this.W,"tick",this.fb),this.W.start())):(xo(this.j,this.m,u,null),as(this,u)),4==t&&is(this),this.i&&!this.I&&(4==t?Cu(this.l,this):(this.i=!1,es(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ro(12)):(this.o=0,Ro(13)),is(this),rs(this)}}}catch(t){}},Pi.fb=function(){if(this.g){var e=lu(this.g),t=this.g.ga();this.C<t.length&&(ns(this),Jo(this,e,t),this.i&&4!=e&&es(this))}},Pi.cancel=function(){this.I=!0,is(this)},Pi.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ao(3),Ro(17)),is(this),this.o=2,rs(this)):ts(this,this.Y-e)},(Pi=ss.prototype).R=function(){us(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Pi.T=function(){return us(this),this.g.concat()},Pi.get=function(e,t){return cs(this.h,e)?this.h[e]:t},Pi.set=function(e,t){cs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Pi.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ls=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof fs){this.g=void 0!==t?t:e.g,ds(this,e.j),this.s=e.s,ps(this,e.i),vs(this,e.m),this.l=e.l,t=e.h;var n=new Is;n.i=t.i,t.g&&(n.g=new ss(t.g),n.h=t.h),ys(this,n),this.o=e.o}else e&&(n=String(e).match(ls))?(this.g=!!t,ds(this,n[1]||"",!0),this.s=ks(n[2]||""),ps(this,n[3]||"",!0),vs(this,n[4]),this.l=ks(n[5]||"",!0),ys(this,n[6]||"",!0),this.o=ks(n[7]||"")):(this.g=!!t,this.h=new Is(null,this.g))}function hs(e){return new fs(e)}function ds(e,t,n){e.j=n?ks(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ps(e,t,n){e.i=n?ks(t,!0):t}function vs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ys(e,t,n){t instanceof Is?(e.h=t,function(e,t){t&&!e.j&&(Cs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(As(this,t),Rs(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=bs(t,Ss)),e.h=new Is(t,e.g))}function ms(e,t,n){e.h.set(t,n)}function gs(e){return ms(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ks(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bs(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ws),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ws(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}fs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bs(t,_s,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(bs(t,_s,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(bs(n,"/"==n.charAt(0)?xs:Es,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",bs(n,Ts)),e.join("")};var _s=/[#\/\?@]/g,Es=/[#\?:]/g,xs=/[#\?]/g,Ss=/[#\?@]/g,Ts=/#/g;function Is(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Cs(e){e.g||(e.g=new ss,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function As(e,t){Cs(e),t=Ds(e,t),cs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,cs((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&us(e)))}function Ns(e,t){return Cs(e),t=Ds(e,t),cs(e.g.h,t)}function Rs(e,t,n){As(e,t),0<n.length&&(e.i=null,e.g.set(Ds(e,t),ta(n)),e.h+=n.length)}function Ds(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pi=Is.prototype).add=function(e,t){Cs(this),this.i=null,e=Ds(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pi.forEach=function(e,t){Cs(this),this.g.forEach((function(n,r){Zi(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Pi.T=function(){Cs(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Pi.R=function(e){Cs(this);var t=[];if("string"===typeof e)Ns(this,e)&&(t=ea(t,this.g.get(Ds(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ea(t,e[n])}return t},Pi.set=function(e,t){return Cs(this),this.i=null,Ns(this,e=Ds(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pi.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Pi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Os=x((function e(t,n){_(this,e),this.h=t,this.g=n}));function Ls(e){this.l=e||Ms,ji.PerformanceNavigationTiming?e=0<(e=ji.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ji.g&&ji.g.Ea&&ji.g.Ea()&&ji.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ps,Ms=10;function Fs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Us(e){return e.h?1:e.g?e.g.size:0}function js(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bs(e,t){e.g?e.g.add(t):e.h=t}function Vs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qs(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ke(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ta(e.i)}function zs(){}function Ks(){this.g=new zs}function Hs(e,t,n){var r=n||"";try{os(e,(function(e,n){var i=e;qi(e)&&(i=no(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ws(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Gs(e){this.l=e.$b||null,this.j=e.ib||!1}function Qs(e,t){Za.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ls.prototype.cancel=function(){if(this.i=qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ke(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},zs.prototype.stringify=function(e){return ji.JSON.stringify(e,void 0)},zs.prototype.parse=function(e){return ji.JSON.parse(e,void 0)},Yi(Gs,Mo),Gs.prototype.g=function(){return new Qs(this.l,this.j)},Gs.prototype.i=(Ps={},function(){return Ps}),Yi(Qs,Za);var Ys=0;function Xs(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function $s(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Js(e)}function Js(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pi=Qs.prototype).open=function(e,t){if(this.readyState!=Ys)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Js(this)},Pi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ji).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Pi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$s(this)),this.readyState=Ys},Pi.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ji.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xs(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Pi.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$s(this):Js(this),3==this.readyState&&Xs(this)}},Pi.Ua=function(e){this.g&&(this.response=this.responseText=e,$s(this))},Pi.Ta=function(e){this.g&&(this.response=e,$s(this))},Pi.ha=function(){this.g&&$s(this)},Pi.setRequestHeader=function(e,t){this.v.append(e,t)},Pi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pi.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zs=ji.JSON.parse;function eu(e){Za.call(this),this.headers=new ss,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tu,this.K=this.L=!1}Yi(eu,Za);var tu="",nu=/^https?$/i,ru=["POST","PUT"];function iu(e){return"content-type"==e.toLowerCase()}function au(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ou(e),uu(e)}function ou(e){e.D||(e.D=!0,eo(e,"complete"),eo(e,"error"))}function su(e){if(e.h&&"undefined"!=typeof Ui&&(!e.C[1]||4!=lu(e)||2!=e.ba()))if(e.v&&4==lu(e))yo(e.Fa,0,e);else if(eo(e,"readystatechange"),4==lu(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ls)[1]||null;if(!a&&ji.self&&ji.self.location){var o=ji.self.location.protocol;a=o.substr(0,o.length-1)}i=!nu.test(a?a.toLowerCase():"")}t=i}if(t)eo(e,"complete"),eo(e,"success");else{e.m=6;try{var s=2<lu(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",ou(e)}}finally{uu(e)}}}function uu(e,t){if(e.g){cu(e);var n=e.g,r=e.C[0]?Bi:null;e.g=null,e.C=null,t||eo(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function cu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ji.clearTimeout(e.A),e.A=null)}function lu(e){return e.g?e.g.readyState:0}function fu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case tu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function hu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ca(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ms(e,t,n))}function du(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function pu(e){this.za=0,this.l=[],this.h=new Eo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=du("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=du("baseRetryDelayMs",5e3,e),this.$a=du("retryDelaySeedMs",1e4,e),this.Ya=du("forwardChannelMaxRetries",2,e),this.ra=du("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ls(e&&e.concurrentRequestLimit),this.Ca=new Ks,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function vu(e){if(mu(e),3==e.G){var t=e.V++,n=hs(e.F);ms(n,"SID",e.J),ms(n,"RID",t),ms(n,"TYPE","terminate"),wu(e,n),(t=new Ko(e,e.h,t,void 0)).K=2,t.v=gs(hs(n)),n=!1,ji.navigator&&ji.navigator.sendBeacon&&(n=ji.navigator.sendBeacon(t.v.toString(),"")),!n&&ji.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ou(t.l,null),t.g.ea(t.v)),t.F=Date.now(),es(t)}Ru(e)}function yu(e){e.g&&(Su(e),e.g.cancel(),e.g=null)}function mu(e){yu(e),e.u&&(ji.clearTimeout(e.u),e.u=null),Iu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ji.clearTimeout(e.m),e.m=null)}function gu(e,t){e.l.push(new Os(e.Za++,t)),3==e.G&&ku(e)}function ku(e){Fs(e.i)||e.m||(e.m=!0,co(e.Ha,e),e.C=0)}function bu(e,t){var n;n=t?t.m:e.V++;var r=hs(e.F);ms(r,"SID",e.J),ms(r,"RID",n),ms(r,"AID",e.U),wu(e,r),e.o&&e.s&&hu(r,e.o,e.s),n=new Ko(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=_u(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Bs(e.i,n),Yo(n,r,t)}function wu(e,t){e.j&&os({},(function(e,n){ms(t,n,e)}))}function _u(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Gi(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Hs(l,o,"req"+c+"_")}catch(lc){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Eu(e){e.g||e.u||(e.Y=1,co(e.Ga,e),e.A=0)}function xu(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Oo(Gi(e.Ga,e),Au(e,e.A)),e.A++,!0)}function Su(e){null!=e.B&&(ji.clearTimeout(e.B),e.B=null)}function Tu(e){e.g=new Ko(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=hs(e.oa);ms(t,"RID","rpc"),ms(t,"SID",e.J),ms(t,"CI",e.N?"0":"1"),ms(t,"AID",e.U),wu(e,t),ms(t,"TYPE","xmlhttp"),e.o&&e.s&&hu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=gs(hs(t)),n.s=null,n.U=!0,Xo(n,e)}function Iu(e){null!=e.v&&(ji.clearTimeout(e.v),e.v=null)}function Cu(e,t){var n=null;if(e.g==t){Iu(e),Su(e),e.g=null;var r=2}else{if(!js(e.i,t))return;n=t.D,Vs(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;eo(r=Io(),new Do(r,n,t,i)),ku(e)}else Eu(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Us(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Oo(Gi(e.Ha,e,t),Au(e,e.C)),e.C++,!0))}(e,t)||2==r&&xu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Nu(e,5);break;case 4:Nu(e,10);break;case 3:Nu(e,6);break;default:Nu(e,2)}}function Au(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Nu(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Gi(e.jb,e);n||(n=new fs("//www.google.com/images/cleardot.gif"),ji.location&&"http"==ji.location.protocol||ds(n,"https"),gs(n)),function(e,t){var n=new Eo;if(ji.Image){var r=new Image;r.onload=Qi(Ws,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qi(Ws,n,r,"TestLoadImage: error",!1,t),r.onabort=Qi(Ws,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qi(Ws,n,r,"TestLoadImage: timeout",!1,t),ji.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ro(2);e.G=0,e.j&&e.j.va(t),Ru(e),mu(e)}function Ru(e){e.G=0,e.I=-1,e.j&&(0==qs(e.i).length&&0==e.l.length||(e.i.i.length=0,ta(e.l),e.l.length=0),e.j.ua())}function Du(e,t,n){var r=function(e){return e instanceof fs?hs(e):new fs(e,void 0)}(n);if(""!=r.i)t&&ps(r,t+"."+r.i),vs(r,r.m);else{var i=ji.location;r=function(e,t,n,r){var i=new fs(null,void 0);return e&&ds(i,e),t&&ps(i,t),n&&vs(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&ca(e.aa,(function(e,t){ms(r,t,e)})),t=e.D,n=e.sa,t&&n&&ms(r,t,n),ms(r,"VER",e.ma),wu(e,r),r}function Ou(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new eu(new Gs({ib:!0})):new eu(e.qa)).L=e.H,t}function Lu(){}function Pu(){if(ya&&!(10<=Number(Aa)))throw Error("Environmental error: no available transport.")}function Mu(e,t){Za.call(this),this.g=new pu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!na(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!na(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ju(this)}function Fu(e){Vo.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Uu(){qo.call(this),this.status=1}function ju(e){this.g=e}(Pi=eu.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jo.g(),this.C=this.u?Fo(this.u):Fo(jo),this.g.onreadystatechange=Gi(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void au(this,a)}e=n||"";var i=new ss(this.headers);r&&os(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=iu,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=ji.FormData&&e instanceof ji.FormData,!(0<=Ji(ru,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cu(this),0<this.B&&((this.K=function(e){return ya&&Ia()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gi(this.pa,this)):this.A=yo(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){au(this,a)}},Pi.pa=function(){"undefined"!=typeof Ui&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,eo(this,"timeout"),this.abort(8))},Pi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,eo(this,"complete"),eo(this,"abort"),uu(this))},Pi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uu(this,!0)),eu.Z.M.call(this)},Pi.Fa=function(){this.s||(this.F||this.v||this.l?su(this):this.cb())},Pi.cb=function(){su(this)},Pi.ba=function(){try{return 2<lu(this)?this.g.status:-1}catch(Ps){return-1}},Pi.ga=function(){try{return this.g?this.g.responseText:""}catch(Ps){return""}},Pi.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zs(t)}},Pi.Da=function(){return this.m},Pi.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Pi=pu.prototype).ma=8,Pi.G=1,Pi.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Pi.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ko(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ha(n=la(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=_u(this,t,r),ms(i=hs(this.F),"RID",e),ms(i,"CVER",22),this.D&&ms(i,"X-HTTP-Session-Id",this.D),wu(this,i),this.o&&n&&hu(i,this.o,n),Bs(this.i,t),this.Ra&&ms(i,"TYPE","init"),this.ja?(ms(i,"$req",r),ms(i,"SID","null"),t.$=!0,Yo(t,i,null)):Yo(t,i,r),this.G=2}}else 3==this.G&&(e?bu(this,e):0==this.l.length||Fs(this.i)||bu(this))},Pi.Ga=function(){if(this.u=null,Tu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Oo(Gi(this.bb,this),e)}},Pi.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ro(10),yu(this),Tu(this))},Pi.ab=function(){null!=this.v&&(this.v=null,yu(this),xu(this),Ro(19))},Pi.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ro(2)):(this.h.info("Failed to ping google.com"),Ro(1))},(Pi=Lu.prototype).xa=function(){},Pi.wa=function(){},Pi.va=function(){},Pi.ua=function(){},Pi.Oa=function(){},Pu.prototype.g=function(e,t){return new Mu(e,t)},Yi(Mu,Za),Mu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),co(Gi(e.hb,e,t))),Ro(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Du(e,null,e.W),ku(e)},Mu.prototype.close=function(){vu(this.g)},Mu.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,gu(this.g,t)}else this.v?((t={}).__data__=no(e),gu(this.g,t)):gu(this.g,e)},Mu.prototype.M=function(){this.g.j=null,delete this.j,vu(this.g),delete this.g,Mu.Z.M.call(this)},Yi(Fu,Vo),Yi(Uu,qo),Yi(ju,Lu),ju.prototype.xa=function(){eo(this.g,"a")},ju.prototype.wa=function(e){eo(this.g,new Fu(e))},ju.prototype.va=function(e){eo(this.g,new Uu(e))},ju.prototype.ua=function(){eo(this.g,"b")},Pu.prototype.createWebChannel=Pu.prototype.g,Mu.prototype.send=Mu.prototype.u,Mu.prototype.open=Mu.prototype.m,Mu.prototype.close=Mu.prototype.close,Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Po.COMPLETE="complete",Uo.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",Za.prototype.listen=Za.prototype.N,eu.prototype.listenOnce=eu.prototype.O,eu.prototype.getLastError=eu.prototype.La,eu.prototype.getLastErrorCode=eu.prototype.Da,eu.prototype.getStatus=eu.prototype.ba,eu.prototype.getResponseJson=eu.prototype.Qa,eu.prototype.getResponseText=eu.prototype.ga,eu.prototype.send=eu.prototype.ea;var Bu=Fi.createWebChannelTransport=function(){return new Pu},Vu=Fi.getStatEventTarget=function(){return Io()},qu=Fi.ErrorCode=Lo,zu=Fi.EventType=Po,Ku=Fi.Event=So,Hu=Fi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Wu=Fi.FetchXmlHttpFactory=Gs,Gu=Fi.WebChannel=Uo,Qu=Fi.XhrIo=eu,Yu="@firebase/firestore",Xu=function(){function e(t){_(this,e),this.uid=t}return x(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Xu.UNAUTHENTICATED=new Xu(null),Xu.GOOGLE_CREDENTIALS=new Xu("google-credentials-uid"),Xu.FIRST_PARTY=new Xu("first-party-uid"),Xu.MOCK_USER=new Xu("mock-user");var $u="9.6.5",Ju=new pn("@firebase/firestore");function Zu(){return Ju.logLevel}function ec(e){if(Ju.logLevel<=an.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rc);Ju.debug.apply(Ju,["Firestore (".concat($u,"): ").concat(e)].concat(d(i)))}}function tc(e){if(Ju.logLevel<=an.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rc);Ju.error.apply(Ju,["Firestore (".concat($u,"): ").concat(e)].concat(d(i)))}}function nc(e){if(Ju.logLevel<=an.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rc);Ju.warn.apply(Ju,["Firestore (".concat($u,"): ").concat(e)].concat(d(i)))}}function rc(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat($u,") INTERNAL ASSERTION FAILED: ")+e;throw tc(t),new Error(t)}function ac(e,t){e||ic()}function oc(e,t){return e}var sc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uc=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return x(n)}(zt),cc=x((function e(){var t=this;_(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),lc=x((function e(t,n){_(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),fc=function(){function e(){_(this,e)}return x(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),hc=function(){function e(t){_(this,e),this.token=t,this.changeListener=null}return x(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),dc=function(){function e(t){_(this,e),this.t=t,this.currentUser=Xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return x(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new cc;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new cc,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ec("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ec("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cc)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ec("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ac("string"==typeof n.accessToken),new lc(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ac(null===e||"string"==typeof e),new Xu(e)}}]),e}(),pc=x((function e(t,n,r){_(this,e),this.type="FirstParty",this.user=Xu.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),vc=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r}return x(e,[{key:"getToken",value:function(){return Promise.resolve(new pc(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),yc=x((function e(t){_(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),mc=function(){function e(t){_(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return x(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&ec("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){ec("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):ec("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(ac("string"==typeof e.token),new yc(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),gc=function(){function e(t,n){var r=this;_(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return x(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function kc(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}gc.I=-1;var bc=function(){function e(){_(this,e)}return x(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=kc(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function wc(e,t){return e<t?-1:e>t?1:0}function _c(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ec(e){return e+"\0"}var xc=function(){function e(t,n){if(_(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new uc(sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new uc(sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new uc(sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uc(sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return x(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?wc(this.nanoseconds,e.nanoseconds):wc(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Sc=function(){function e(t){_(this,e),this.timestamp=t}return x(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xc(0,0))}}]),e}();function Tc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ic(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ac=function(){function e(t,n,r){_(this,e),void 0===n?n=0:n>t.length&&ic(),void 0===r?r=t.length-n:r>t.length-n&&ic(),this.segments=t,this.offset=n,this.len=r}return x(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Nc=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new uc(sc.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,d(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ac),Rc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dc=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Rc.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new uc(sc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new uc(sc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new uc(sc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new uc(sc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ac),Oc=function(){function e(t){_(this,e),this.fields=t,t.sort(Dc.comparator)}return x(e,[{key:"covers",value:function(e){var t,n=ke(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return _c(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Lc=function(e){function t(e){_(this,t),this.binaryString=e}return x(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return wc(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Lc.EMPTY_BYTE_STRING=new Lc("");var Pc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(e){if(ac(!!e),"string"==typeof e){var t=0,n=Pc.exec(e);if(ac(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fc(e.seconds),nanos:Fc(e.nanos)}}function Fc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uc(e){return"string"==typeof e?Lc.fromBase64String(e):Lc.fromUint8Array(e)}function jc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bc(e){var t=e.mapValue.fields.__previous_value__;return jc(t)?Bc(t):t}function Vc(e){var t=Mc(e.mapValue.fields.__local_write_time__.timestampValue);return new xc(t.seconds,t.nanos)}function qc(e){return null==e}function zc(e){return 0===e&&1/e==-1/0}function Kc(e){return"number"==typeof e&&Number.isInteger(e)&&!zc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Hc=function(){function e(t){_(this,e),this.path=t}return x(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Nc.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Nc.fromString(t))}},{key:"fromName",value:function(t){return new e(Nc.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Nc.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Nc(t.slice()))}}]),e}();function Wc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jc(e)?4:10:ic()}function Gc(e,t){if(e===t)return!0;var n=Wc(e);if(n!==Wc(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vc(e).isEqual(Vc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Mc(e.timestampValue),r=Mc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uc(e.bytesValue).isEqual(Uc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fc(e.geoPointValue.latitude)===Fc(t.geoPointValue.latitude)&&Fc(e.geoPointValue.longitude)===Fc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fc(e.integerValue)===Fc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Fc(e.doubleValue),r=Fc(t.doubleValue);return n===r?zc(n)===zc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return _c(e.arrayValue.values||[],t.arrayValue.values||[],Gc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tc(n)!==Tc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gc(n[i],r[i])))return!1;return!0}(e,t);default:return ic()}}function Qc(e,t){return void 0!==(e.values||[]).find((function(e){return Gc(e,t)}))}function Yc(e,t){if(e===t)return 0;var n=Wc(e),r=Wc(t);if(n!==r)return wc(n,r);switch(n){case 0:return 0;case 1:return wc(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Fc(e.integerValue||e.doubleValue),r=Fc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xc(e.timestampValue,t.timestampValue);case 4:return Xc(Vc(e),Vc(t));case 5:return wc(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Uc(e),r=Uc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=wc(n[i],r[i]);if(0!==a)return a}return wc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=wc(Fc(e.latitude),Fc(t.latitude));return 0!==n?n:wc(Fc(e.longitude),Fc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Yc(n[i],r[i]);if(a)return a}return wc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=wc(r[o],a[o]);if(0!==s)return s;var u=Yc(n[r[o]],i[a[o]]);if(0!==u)return u}return wc(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ic()}}function Xc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wc(e,t);var n=Mc(e),r=Mc(t),i=wc(n.seconds,r.seconds);return 0!==i?i:wc(n.nanos,r.nanos)}function $c(e){return Jc(e)}function Jc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Mc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Uc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Hc.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ke(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Jc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ke(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Jc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ic();var t,n}function Zc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function el(e){return!!e&&"integerValue"in e}function tl(e){return!!e&&"arrayValue"in e}function nl(e){return!!e&&"nullValue"in e}function rl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function il(e){return!!e&&"mapValue"in e}function al(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ic(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=al(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=al(e.arrayValue.values[r]);return n}return Object.assign({},e)}var ol=function(){function e(t){_(this,e),this.value=t}return x(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!il(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}},{key:"setAll",value:function(e){var t=this,n=Dc.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=al(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());il(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Gc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];il(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ic(t,(function(t,n){return e[t]=n}));var r,i=ke(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(al(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sl(e){var t=[];return Ic(e.fields,(function(e,n){var r=new Dc([e]);if(il(n)){var i=sl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ke(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Oc(t)}var ul=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return x(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ol.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ol.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Sc.min(),ol.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ol.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ol.empty(),2)}}]),e}(),cl=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.R=null}));function ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new cl(e,t,n,r,i,a,o)}function fl(e){var t=oc(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+$c(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=xl(t.startAt)),t.endAt&&(n+="|ub:",n+=xl(t.endAt)),t.R=n}return t.R}function hl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Tl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Gc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cl(e.startAt,t.startAt)&&Cl(e.endAt,t.endAt)}function dl(e){return Hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var pl=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Yc(t,this.value)):null!==t&&Wc(this.value)===Wc(t)&&this.v(Yc(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ic()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new vl(e,t,r):"array-contains"===t?new kl(e,r):"in"===t?new bl(e,r):"not-in"===t?new wl(e,r):"array-contains-any"===t?new _l(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new yl(e,n):new ml(e,n)}}]),n}(function(){return x((function e(){_(this,e)}))}());var vl=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).key=Hc.fromName(i.referenceValue),a}return x(n,[{key:"matches",value:function(e){var t=Hc.comparator(e.key,this.key);return this.v(t)}}]),n}(pl),yl=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"in",r)).keys=gl("in",r),i}return x(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pl),ml=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"not-in",r)).keys=gl("not-in",r),i}return x(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pl);function gl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Hc.fromName(e.referenceValue)}))}var kl=function(e){I(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains",r)}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return tl(t)&&Qc(t.arrayValue,this.value)}}]),n}(pl),bl=function(e){I(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"in",r)}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qc(this.value.arrayValue,t)}}]),n}(pl),wl=function(e){I(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"not-in",r)}return x(n,[{key:"matches",value:function(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qc(this.value.arrayValue,t)}}]),n}(pl),_l=function(e){I(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains-any",r)}return x(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!tl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qc(t.value.arrayValue,e)}))}}]),n}(pl),El=x((function e(t,n){_(this,e),this.position=t,this.before=n}));function xl(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return $c(e)})).join(","))}var Sl=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_(this,e),this.field=t,this.dir=n}));function Tl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Il(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Hc.comparator(Hc.fromName(o.referenceValue),n.key):Yc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Cl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Gc(e.position[n],t.position[n]))return!1;return!0}var Al=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt}));function Nl(e,t,n,r,i,a,o,s){return new Al(e,t,n,r,i,a,o,s)}function Rl(e){return new Al(e)}function Dl(e){return!qc(e.limit)&&"F"===e.limitType}function Ol(e){return!qc(e.limit)&&"L"===e.limitType}function Ll(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Pl(e){var t,n=ke(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ml(e){return null!==e.collectionGroup}function Fl(e){var t=oc(e);if(null===t.S){t.S=[];var n=Pl(t),r=Ll(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new Sl(n)),t.S.push(new Sl(Dc.keyField(),"asc"));else{var i,a=!1,o=ke(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.S.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Sl(Dc.keyField(),u))}}}return t.S}function Ul(e){var t=oc(e);if(!t.D)if("F"===t.limitType)t.D=ll(t.path,t.collectionGroup,Fl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ke(Fl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Sl(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new El(t.endAt.position,!t.endAt.before):null,u=t.startAt?new El(t.startAt.position,!t.startAt.before):null;t.D=ll(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.D}function jl(e,t,n){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bl(e,t){return hl(Ul(e),Ul(t))&&e.limitType===t.limitType}function Vl(e){return"".concat(fl(Ul(e)),"|lt:").concat(e.limitType)}function ql(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat($c(t.value));var t})).join(", "),"]")),qc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+xl(e.startAt)),e.endAt&&(t+=", endAt: "+xl(e.endAt)),"Target(".concat(t,")")}(Ul(e)),"; limitType=").concat(e.limitType,")")}function zl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Hc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ke(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ke(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!Il(e.startAt,Fl(e),t))&&(!e.endAt||!Il(e.endAt,Fl(e),t))}(e,t)}function Kl(e){return function(t,n){var r,i=!1,a=ke(Fl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Hl(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Hl(e,t,n){var r=e.field.isKeyField()?Hc.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yc(r,i):ic()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ic()}}function Wl(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(t)?"-0":t}}function Gl(e){return{integerValue:""+e}}function Ql(e,t){return Kc(t)?Gl(t):Wl(e,t)}var Yl=x((function e(){_(this,e),this._=void 0}));function Xl(e,t,n){return e instanceof Zl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ef?tf(e,t):e instanceof nf?rf(e,t):function(e,t){var n=Jl(e,t),r=of(n)+of(e.N);return el(n)&&el(e.N)?Gl(r):Wl(e.k,r)}(e,t)}function $l(e,t,n){return e instanceof ef?tf(e,t):e instanceof nf?rf(e,t):n}function Jl(e,t){return e instanceof af?el(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Zl=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n)}(Yl),ef=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return x(n)}(Yl);function tf(e,t){var n,r=sf(t),i=ke(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Gc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var nf=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return x(n)}(Yl);function rf(e,t){var n,r=sf(t),i=ke(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Gc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var af=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).k=e,i.N=r,i}return x(n)}(Yl);function of(e){return Fc(e.integerValue||e.doubleValue)}function sf(e){return tl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uf=x((function e(t,n){_(this,e),this.field=t,this.transform=n}));var cf=x((function e(t,n){_(this,e),this.version=t,this.transformResults=n})),lf=function(){function e(t,n){_(this,e),this.updateTime=t,this.exists=n}return x(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ff(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var hf=x((function e(){_(this,e)}));function df(e,t,n){e instanceof gf?function(e,t,n){var r=e.value.clone(),i=wf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kf?function(e,t,n){if(ff(e.precondition,t)){var r=wf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pf(e,t,n){e instanceof gf?function(e,t,n){if(ff(e.precondition,t)){var r=e.value.clone(),i=_f(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(mf(t),r).setHasLocalMutations()}}(e,t,n):e instanceof kf?function(e,t,n){if(ff(e.precondition,t)){var r=_f(e.fieldTransforms,n,t),i=t.data;i.setAll(bf(e)),i.setAll(r),t.convertToFoundDocument(mf(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ff(e.precondition,t)&&t.convertToNoDocument(Sc.min())}(e,t)}function vf(e,t){var n,r=null,i=ke(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Jl(a.transform,o||null);null!=s&&(null==r&&(r=ol.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function yf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&_c(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ef&&t instanceof ef||e instanceof nf&&t instanceof nf?_c(e.elements,t.elements,Gc):e instanceof af&&t instanceof af?Gc(e.N,t.N):e instanceof Zl&&t instanceof Zl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function mf(e){return e.isFoundDocument()?e.version:Sc.min()}var gf=function(e){I(n,e);var t=D(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return x(n)}(hf),kf=function(e){I(n,e);var t=D(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return x(n)}(hf);function bf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function wf(e,t,n){var r=new Map;ac(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,$l(o,s,n[i]))}return r}function _f(e,t,n){var r,i=new Map,a=ke(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Xl(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ef,xf,Sf=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return x(n)}(hf),Tf=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return x(n)}(hf),If=x((function e(t){_(this,e),this.count=t}));function Cf(e){switch(e){default:return ic();case sc.CANCELLED:case sc.UNKNOWN:case sc.DEADLINE_EXCEEDED:case sc.RESOURCE_EXHAUSTED:case sc.INTERNAL:case sc.UNAVAILABLE:case sc.UNAUTHENTICATED:return!1;case sc.INVALID_ARGUMENT:case sc.NOT_FOUND:case sc.ALREADY_EXISTS:case sc.PERMISSION_DENIED:case sc.FAILED_PRECONDITION:case sc.ABORTED:case sc.OUT_OF_RANGE:case sc.UNIMPLEMENTED:case sc.DATA_LOSS:return!0}}function Af(e){if(void 0===e)return tc("GRPC error has no .code"),sc.UNKNOWN;switch(e){case Ef.OK:return sc.OK;case Ef.CANCELLED:return sc.CANCELLED;case Ef.UNKNOWN:return sc.UNKNOWN;case Ef.DEADLINE_EXCEEDED:return sc.DEADLINE_EXCEEDED;case Ef.RESOURCE_EXHAUSTED:return sc.RESOURCE_EXHAUSTED;case Ef.INTERNAL:return sc.INTERNAL;case Ef.UNAVAILABLE:return sc.UNAVAILABLE;case Ef.UNAUTHENTICATED:return sc.UNAUTHENTICATED;case Ef.INVALID_ARGUMENT:return sc.INVALID_ARGUMENT;case Ef.NOT_FOUND:return sc.NOT_FOUND;case Ef.ALREADY_EXISTS:return sc.ALREADY_EXISTS;case Ef.PERMISSION_DENIED:return sc.PERMISSION_DENIED;case Ef.FAILED_PRECONDITION:return sc.FAILED_PRECONDITION;case Ef.ABORTED:return sc.ABORTED;case Ef.OUT_OF_RANGE:return sc.OUT_OF_RANGE;case Ef.UNIMPLEMENTED:return sc.UNIMPLEMENTED;case Ef.DATA_LOSS:return sc.DATA_LOSS;default:return ic()}}(xf=Ef||(Ef={}))[xf.OK=0]="OK",xf[xf.CANCELLED=1]="CANCELLED",xf[xf.UNKNOWN=2]="UNKNOWN",xf[xf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xf[xf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xf[xf.NOT_FOUND=5]="NOT_FOUND",xf[xf.ALREADY_EXISTS=6]="ALREADY_EXISTS",xf[xf.PERMISSION_DENIED=7]="PERMISSION_DENIED",xf[xf.UNAUTHENTICATED=16]="UNAUTHENTICATED",xf[xf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xf[xf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xf[xf.ABORTED=10]="ABORTED",xf[xf.OUT_OF_RANGE=11]="OUT_OF_RANGE",xf[xf.UNIMPLEMENTED=12]="UNIMPLEMENTED",xf[xf.INTERNAL=13]="INTERNAL",xf[xf.UNAVAILABLE=14]="UNAVAILABLE",xf[xf.DATA_LOSS=15]="DATA_LOSS";var Nf=function(){function e(t,n){_(this,e),this.comparator=t,this.root=n||Df.EMPTY}return x(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Df.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Df.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rf(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rf(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rf(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rf(this.root,e,this.comparator,!0)}}]),e}(),Rf=function(){function e(t,n,r,i){_(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return x(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Df=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return x(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ic();if(this.right.isRed())throw ic();var e=this.left.check();if(e!==this.right.check())throw ic();return e+(this.isRed()?0:1)}}]),e}();Df.EMPTY=null,Df.RED=!0,Df.BLACK=!1,Df.EMPTY=new(function(){function e(){_(this,e),this.size=0}return x(e,[{key:"key",get:function(){throw ic()}},{key:"value",get:function(){throw ic()}},{key:"color",get:function(){throw ic()}},{key:"left",get:function(){throw ic()}},{key:"right",get:function(){throw ic()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Df(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Of=function(){function e(t){_(this,e),this.comparator=t,this.data=new Nf(this.comparator)}return x(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Lf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Lf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Lf=function(){function e(t){_(this,e),this.iter=t}return x(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Pf=new Nf(Hc.comparator);function Mf(){return Pf}var Ff=new Nf(Hc.comparator);function Uf(){return Ff}var jf=new Nf(Hc.comparator);function Bf(){return jf}var Vf=new Of(Hc.comparator);function qf(){for(var e=Vf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var zf=new Of(wc);function Kf(){return zf}var Hf=function(){function e(t,n,r,i,a){_(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return x(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Wf.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Sc.min(),r,Kf(),Mf(),qf())}}]),e}(),Wf=function(){function e(t,n,r,i,a){_(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return x(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Lc.EMPTY_BYTE_STRING,n,qf(),qf(),qf())}}]),e}(),Gf=x((function e(t,n,r,i){_(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.O=i})),Qf=x((function e(t,n){_(this,e),this.targetId=t,this.M=n})),Yf=x((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Xf=function(){function e(){_(this,e),this.F=0,this.L=Zf(),this.B=Lc.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return x(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.F}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=qf(),t=qf(),n=qf();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ic()}})),new Wf(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=Zf()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.F+=1}},{key:"Z",value:function(){this.F-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),$f=function(){function e(t){_(this,e),this.et=t,this.nt=new Map,this.st=Mf(),this.it=Jf(),this.rt=new Of(wc)}return x(e,[{key:"ot",value:function(e){var t,n=ke(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.O&&e.O.isFoundDocument()?this.ct(r,e.O):this.at(r,e.key,e.O)}}catch(s){n.e(s)}finally{n.f()}var i,a=ke(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.O)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:ic()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.M.count,r=this.wt(t);if(r){var i=r.target;if(dl(i))if(0===n){var a=new Hc(i.path);this.at(t,a,ul.newNoDocument(a,Sc.min()))}else ac(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&dl(a.target)){var o=new Hc(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.at(i,o,ul.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=qf();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Hf(e,n,this.rt,this.st,r);return this.st=Mf(),this.it=Jf(),this.rt=new Of(wc),i}},{key:"ct",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Xf,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Of(wc),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||ec("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Xf),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Jf(){return new Nf(Hc.comparator)}function Zf(){return new Nf(Hc.comparator)}var eh={asc:"ASCENDING",desc:"DESCENDING"},th={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nh=x((function e(t,n){_(this,e),this.databaseId=t,this.C=n}));function rh(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ih(e,t){return e.C?t.toBase64():t.toUint8Array()}function ah(e,t){return rh(e,t.toTimestamp())}function oh(e){return ac(!!e),Sc.fromTimestamp(function(e){var t=Mc(e);return new xc(t.seconds,t.nanos)}(e))}function sh(e,t){return function(e){return new Nc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function uh(e){var t=Nc.fromString(e);return ac(Oh(t)),t}function ch(e,t){return sh(e.databaseId,t.path)}function lh(e,t){var n=uh(t);if(n.get(1)!==e.databaseId.projectId)throw new uc(sc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uc(sc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Hc(ph(n))}function fh(e,t){return sh(e.databaseId,t)}function hh(e){var t=uh(e);return 4===t.length?Nc.emptyPath():ph(t)}function dh(e){return new Nc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ph(e){return ac(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vh(e,t,n){return{name:ch(e,t),fields:n.value.mapValue.fields}}function yh(e,t,n){var r=lh(e,t.name),i=oh(t.updateTime),a=new ol({mapValue:{fields:t.fields}}),o=ul.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function mh(e,t){return"found"in t?function(e,t){ac(!!t.found),t.found.name,t.found.updateTime;var n=lh(e,t.found.name),r=oh(t.found.updateTime),i=new ol({mapValue:{fields:t.found.fields}});return ul.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ac(!!t.missing),ac(!!t.readTime);var n=lh(e,t.missing),r=oh(t.readTime);return ul.newNoDocument(n,r)}(e,t):ic()}function gh(e,t){var n;if(t instanceof gf)n={update:vh(e,t.key,t.value)};else if(t instanceof Sf)n={delete:ch(e,t.key)};else if(t instanceof kf)n={update:vh(e,t.key,t.data),updateMask:Dh(t.fieldMask)};else{if(!(t instanceof Tf))return ic();n={verify:ch(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Zl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ef)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof af)return{fieldPath:t.field.canonicalString(),increment:n.N};throw ic()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ic()}(e,t.precondition)),n}function kh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?lf.updateTime(oh(e.updateTime)):void 0!==e.exists?lf.exists(e.exists):lf.none()}(t.currentDocument):lf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ac("REQUEST_TIME"===t.setToServerValue),n=new Zl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ef(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nf(i)}else"increment"in t?n=new af(e,t.increment):ic();var a=Dc.fromServerFormat(t.fieldPath);return new uf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=lh(e,t.update.name),a=new ol({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Oc(t.map((function(e){return Dc.fromServerFormat(e)})))}(t.updateMask);return new kf(i,a,o,n,r)}return new gf(i,a,n,r)}if(t.delete){var s=lh(e,t.delete);return new Sf(s,n)}if(t.verify){var u=lh(e,t.verify);return new Tf(u,n)}return ic()}function bh(e,t){return{documents:[fh(e,t.path)]}}function wh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=fh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(rl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NAN"}};if(nl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NOT_NAN"}};if(nl(e.value))return{unaryFilter:{field:Ch(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ch(e.field),op:Ih(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ch(e.field),direction:Th(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||qc(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=xh(t.startAt)),t.endAt&&(n.structuredQuery.endAt=xh(t.endAt)),n}function _h(e){var t=hh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ac(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Eh(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Sl(Ah(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return qc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Sh(n.startAt));var l=null;return n.endAt&&(l=Sh(n.endAt)),Nl(t,i,s,o,u,"F",c,l)}function Eh(e){return e?void 0!==e.unaryFilter?[Rh(e)]:void 0!==e.fieldFilter?[Nh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Eh(e)})).reduce((function(e,t){return e.concat(t)})):ic():[]}function xh(e){return{before:e.before,values:e.position}}function Sh(e){var t=!!e.before,n=e.values||[];return new El(n,t)}function Th(e){return eh[e]}function Ih(e){return th[e]}function Ch(e){return{fieldPath:e.canonicalString()}}function Ah(e){return Dc.fromServerFormat(e.fieldPath)}function Nh(e){return pl.create(Ah(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ic()}}(e.fieldFilter.op),e.fieldFilter.value)}function Rh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ah(e.unaryFilter.field);return pl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ah(e.unaryFilter.field);return pl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ah(e.unaryFilter.field);return pl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ah(e.unaryFilter.field);return pl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ic()}}function Dh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Oh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Lh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Mh(t)),t=Ph(e.get(n),t);return Mh(t)}function Ph(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Mh(e){return e+"\x01\x01"}function Fh(e){var t=e.length;if(ac(t>=2),2===t)return ac("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Nc.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ic(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ic()}a=o+2}return new Nc(r)}var Uh=x((function e(t,n){_(this,e),this.seconds=t,this.nanoseconds=n})),jh=x((function e(t,n,r){_(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));jh.store="owner",jh.key="owner";var Bh=x((function e(t,n,r){_(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Bh.store="mutationQueues",Bh.keyPath="userId";var Vh=x((function e(t,n,r,i,a){_(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Vh.store="mutations",Vh.keyPath="batchId",Vh.userMutationsIndex="userMutationsIndex",Vh.userMutationsKeyPath=["userId","batchId"];var qh=function(){function e(){_(this,e)}return x(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Lh(t)]}},{key:"key",value:function(e,t,n){return[e,Lh(t),n]}}]),e}();qh.store="documentMutations",qh.PLACEHOLDER=new qh;var zh=x((function e(t,n){_(this,e),this.path=t,this.readTime=n})),Kh=x((function e(t,n){_(this,e),this.path=t,this.version=n})),Hh=x((function e(t,n,r,i,a,o){_(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Hh.store="remoteDocuments",Hh.readTimeIndex="readTimeIndex",Hh.readTimeIndexPath="readTime",Hh.collectionReadTimeIndex="collectionReadTimeIndex",Hh.collectionReadTimeIndexPath=["parentPath","readTime"];var Wh=x((function e(t){_(this,e),this.byteSize=t}));Wh.store="remoteDocumentGlobal",Wh.key="remoteDocumentGlobalKey";var Gh=x((function e(t,n,r,i,a,o,s){_(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));Gh.store="targets",Gh.keyPath="targetId",Gh.queryTargetsIndexName="queryTargetsIndex",Gh.queryTargetsKeyPath=["canonicalId","targetId"];var Qh=x((function e(t,n,r){_(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Qh.store="targetDocuments",Qh.keyPath=["targetId","path"],Qh.documentTargetsIndex="documentTargetsIndex",Qh.documentTargetsKeyPath=["path","targetId"];var Yh=x((function e(t,n,r,i){_(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Yh.key="targetGlobalKey",Yh.store="targetGlobal";var Xh=x((function e(t,n){_(this,e),this.collectionId=t,this.parent=n}));Xh.store="collectionParents",Xh.keyPath=["collectionId","parent"];var $h=x((function e(t,n,r,i){_(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));$h.store="clientMetadata",$h.keyPath="clientId";var Jh=x((function e(t,n,r){_(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Jh.store="bundles",Jh.keyPath="bundleId";var Zh=x((function e(t,n,r){_(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));Zh.store="namedQueries",Zh.keyPath="name";var ed=[Bh.store,Vh.store,qh.store,Hh.store,Gh.store,jh.store,Yh.store,Qh.store].concat([$h.store]).concat([Wh.store]).concat([Xh.store]).concat([Jh.store,Zh.store]),td="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nd=function(){function e(){_(this,e),this.onCommittedListeners=[]}return x(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),rd=function(){function e(t){var n=this;_(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return x(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ic(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ke(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),id=function(){function e(t,n){var r=this;_(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new cc,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new sd(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=hd(e.target.error);r.It.reject(new sd(t,n))}}return x(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(ec("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new cd(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sd(n,t)}}}]),e}(),ad=function(){function e(t,n,r){_(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.bt(Vt())&&tc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return x(e,[{key:"Ct",value:function(){var e=v(m().mark((function e(t){var n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ec("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uc(sc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new uc(sc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new sd(t,n))},i.onupgradeneeded=function(e){ec("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){ec("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=v(m().mark((function e(t,n,r,i){var a,o,s,u,c=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(m().mark((function e(){var n,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=id.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),rd.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,ec("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ec("SimpleDb","Removing database:",e),ld(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Pt",value:function(){if("object"!==typeof indexedDB)return!1;if(e.vt())return!0;var t=Vt(),n=e.bt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/unsplash-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"bt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),od=function(){function e(t){_(this,e),this.$t=t,this.Ot=!1,this.Mt=null}return x(e,[{key:"isDone",get:function(){return this.Ot}},{key:"Ft",get:function(){return this.Mt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ot=!0}},{key:"Lt",value:function(e){this.Mt=e}},{key:"delete",value:function(){return ld(this.$t.delete())}}]),e}(),sd=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,sc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return x(n)}(uc);function ud(e){return"IndexedDbTransactionError"===e.name}var cd=function(){function e(t){_(this,e),this.store=t}return x(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ec("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ec("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ld(n)}},{key:"add",value:function(e){return ec("SimpleDb","ADD",this.store.name,e,e),ld(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ld(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ec("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ec("SimpleDb","DELETE",this.store.name,e),ld(this.store.delete(e))}},{key:"count",value:function(){return ec("SimpleDb","COUNT",this.store.name),ld(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){ec("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new rd((function(n,r){t.onerror=function(e){var t=hd(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new rd((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new od(i),o=t(i.primaryKey,i.value,a);if(o instanceof rd){var s=o.catch((function(e){return a.done(),rd.reject(e)}));n.push(s)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}})).next((function(){return rd.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ld(e){return new rd((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=hd(e.target.error);n(t)}}))}var fd=!1;function hd(e){var t=ad.bt(Vt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new uc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fd||(fd=!0,setTimeout((function(){throw r}),0)),r}}return e}var dd=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return x(n)}(nd);function pd(e,t){var n=oc(e);return ad.Dt(n.Wt,t)}var vd=function(){function e(t,n,r,i){_(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return x(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&df(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ke(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&pf(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=ke(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&pf(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Sc.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(function(e,t){return yf(e,t)}))&&_c(this.baseMutations,e.baseMutations,(function(e,t){return yf(e,t)}))}}]),e}(),yd=function(){function e(t,n,r,i){_(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return x(e,null,[{key:"from",value:function(t,n,r){ac(t.mutations.length===r.length);for(var i=Bf(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),md=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lc.EMPTY_BYTE_STRING;_(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return x(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),gd=x((function e(t){_(this,e),this.Gt=t}));function kd(e,t){if(t.document)return yh(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Hc.fromSegments(t.noDocument.path),r=xd(t.noDocument.readTime),i=ul.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Hc.fromSegments(t.unknownDocument.path),o=xd(t.unknownDocument.version);return ul.newUnknownDocument(a,o)}return ic()}function bd(e,t,n){var r=wd(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:ch(e,t.key),fields:t.data.value.mapValue.fields,updateTime:rh(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new Hh(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Ed(t.version),c=t.hasCommittedMutations;return new Hh(null,new zh(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Ed(t.version);return new Hh(new Kh(l,f),null,null,!0,r,i)}return ic()}function wd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function _d(e){var t=new xc(e[0],e[1]);return Sc.fromTimestamp(t)}function Ed(e){var t=e.toTimestamp();return new Uh(t.seconds,t.nanoseconds)}function xd(e){var t=new xc(e.seconds,e.nanoseconds);return Sc.fromTimestamp(t)}function Sd(e,t){for(var n=(t.baseMutations||[]).map((function(t){return kh(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return kh(e.Gt,t)})),s=xc.fromMillis(t.localWriteTimeMs);return new vd(t.batchId,s,n,o)}function Td(e){var t,n,r=xd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?xd(e.lastLimboFreeSnapshotVersion):Sc.min();return void 0!==e.query.documents?(ac(1===(n=e.query).documents.length),t=Ul(Rl(hh(n.documents[0])))):t=function(e){return Ul(_h(e))}(e.query),new md(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Lc.fromBase64String(e.resumeToken))}function Id(e,t){var n,r=Ed(t.snapshotVersion),i=Ed(t.lastLimboFreeSnapshotVersion);n=dl(t.target)?bh(e.Gt,t.target):wh(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Gh(t.targetId,fl(t.target),r,a,t.sequenceNumber,i,n)}function Cd(e){var t=_h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jl(t,t.limit,"L"):t}var Ad=function(){function e(){_(this,e)}return x(e,[{key:"getBundleMetadata",value:function(e,t){return Nd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:xd(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Nd(e).put({bundleId:(n=t).id,createTime:Ed(oh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Rd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Cd(t.bundledQuery),readTime:xd(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Rd(e).put(function(e){return{name:e.name,readTime:Ed(oh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Nd(e){return pd(e,Jh.store)}function Rd(e){return pd(e,Zh.store)}var Dd=function(){function e(){_(this,e),this.zt=new Od}return x(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),rd.resolve()}},{key:"getCollectionParents",value:function(e,t){return rd.resolve(this.zt.getEntries(t))}}]),e}(),Od=function(){function e(){_(this,e),this.index={}}return x(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Of(Nc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Of(Nc.comparator)).toArray()}}]),e}(),Ld=function(){function e(){_(this,e),this.Ht=new Od}return x(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:Lh(i)};return Pd(e).put(a)}return rd.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ec(t),""],!1,!0);return Pd(e).Bt(r).next((function(e){var r,i=ke(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Fh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Pd(e){return pd(e,Xh.store)}var Md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fd=function(){function e(t,n,r){_(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return x(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ud(e,t,n){var r=e.store(Vh.store),i=e.store(qh.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.jt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){ac(1===s)})));var c,l=[],f=ke(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=qh.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return rd.waitFor(a).next((function(){return l}))}function jd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ic();t=e.noDocument}return JSON.stringify(t).length}Fd.DEFAULT_COLLECTION_PERCENTILE=10,Fd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fd.DEFAULT=new Fd(41943040,Fd.DEFAULT_COLLECTION_PERCENTILE,Fd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fd.DISABLED=new Fd(-1,0,0);var Bd=function(){function e(t,n,r,i){_(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return x(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qd(e).jt({index:Vh.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=zd(e),o=qd(e);return o.add({}).next((function(s){ac("number"==typeof s);var u,c=new vd(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return gh(e.Gt,t)})),i=n.mutations.map((function(t){return gh(e.Gt,t)}));return new Vh(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new Of((function(e,t){return wc(e.canonicalString(),t.canonicalString())})),d=ke(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=qh.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,qh.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[s]=c.keys()})),rd.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return qd(e).get(t).next((function(e){return e?(ac(e.userId===n.userId),Sd(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?rd.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return qd(e).jt({index:Vh.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(ac(t.batchId>=r),a=Sd(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qd(e).jt({index:Vh.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qd(e).Bt(Vh.userMutationsIndex,n).next((function(e){return e.map((function(e){return Sd(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=qh.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return zd(e).jt({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=Fh(l);if(c===n.userId&&t.path.isEqual(h))return qd(e).get(f).next((function(e){if(!e)throw ic();ac(e.userId===n.userId),a.push(Sd(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Of(wc),i=[];return t.forEach((function(t){var a=qh.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=zd(e).jt({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=Fh(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),rd.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=qh.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Of(wc);return zd(e).jt({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=Fh(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.te(e,s)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(qd(e).get(t).next((function(e){if(null===e)throw ic();ac(e.userId===n.userId),r.push(Sd(n.k,e))})))})),rd.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ud(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),rd.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return rd.resolve();var r=IDBKeyRange.lowerBound(qh.prefixForUser(t.userId)),i=[];return zd(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Fh(e[1]);i.push(a)}else r.done()})).next((function(){ac(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Vd(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Kd(e).get(this.userId).next((function(e){return e||new Bh(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return ac(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Vd(e,t,n){var r=qh.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return zd(e).jt({range:a,Kt:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function qd(e){return pd(e,Vh.store)}function zd(e){return pd(e,qh.store)}function Kd(e){return pd(e,Bh.store)}var Hd=function(){function e(t){_(this,e),this.se=t}return x(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Wd=function(){function e(t,n){_(this,e),this.referenceDelegate=t,this.k=n}return x(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Hd(n.highestTargetId);return n.highestTargetId=r.next(),t.ce(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return Sc.fromTimestamp(new xc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ce(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ce(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Gd(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return ac(t.targetCount>0),t.targetCount-=1,n.ce(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Gd(e).jt((function(o,s){var u=Td(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return rd.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Gd(e).jt((function(e,n){var r=Td(n);t(r)}))}},{key:"oe",value:function(e){return Qd(e).get(Yh.key).next((function(e){return ac(null!==e),e}))}},{key:"ce",value:function(e,t){return Qd(e).put(Yh.key,t)}},{key:"ae",value:function(e,t){return Gd(e).put(Id(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=fl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gd(e).jt({range:r,index:Gh.queryTargetsIndexName},(function(e,n,r){var a=Td(n);hl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Yd(e);return t.forEach((function(t){var o=Lh(t.path);i.push(a.put(new Qh(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),rd.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Yd(e);return rd.forEach(t,(function(t){var a=Lh(t.path);return rd.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Yd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Yd(e),i=qf();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=Fh(e[1]),a=new Hc(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Lh(t.path),r=IDBKeyRange.bound([n],[Ec(n)],!1,!0),i=0;return Yd(e).jt({index:Qh.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Gd(e).get(t).next((function(e){return e?Td(e):null}))}}]),e}();function Gd(e){return pd(e,Gh.store)}function Qd(e){return pd(e,Yh.store)}function Yd(e){return pd(e,Qh.store)}function Xd(e){return $d.apply(this,arguments)}function $d(){return $d=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===sc.FAILED_PRECONDITION&&t.message===td){e.next=2;break}throw t;case 2:ec("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Jd(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=wc(r,o);return 0===c?wc(i,s):c}var Zd=function(){function e(t){_(this,e),this.he=t,this.buffer=new Of(Jd),this.le=0}return x(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Jd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ep=function(){function e(t,n){_(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return x(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;ec("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,v(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ud(n.t0)){n.next=12;break}ec("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Xd(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),tp=function(){function e(t,n){_(this,e),this.ge=t,this.params=n}return x(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return rd.resolve(gc.I);var r=new Zd(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ec("LruGarbageCollector","Garbage collection skipped; disabled"),rd.resolve(Md)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ec("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Md):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ec("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Zu()<=an.DEBUG&&ec("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),rd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),np=function(){function e(t,n){_(this,e),this.db=t,this.garbageCollector=function(e,t){return new tp(e,t)}(this,n)}return x(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return rp(e,n)}},{key:"removeReference",value:function(e,t,n){return rp(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return rp(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Kd(e).Qt((function(r){return Vd(e,r,t).next((function(e){return e&&(n=!0),rd.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,s){if(s<=t){var u=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Yd(e).delete([0,Lh(o.path)])}))}));i.push(u)}})).next((function(){return rd.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return rp(e,t)}},{key:"Ie",value:function(e,t){var n,r=Yd(e),i=gc.I;return r.jt({index:Qh.documentTargetsIndex},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==gc.I&&t(new Hc(Fh(n)),i),i=c,n=s):i=gc.I})).next((function(){i!==gc.I&&t(new Hc(Fh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function rp(e,t){return Yd(e).put(function(e,t){return new Qh(0,Lh(e.path),t)}(t,e.currentSequenceNumber))}var ip=function(){function e(t,n){_(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return x(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ke(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Ic(this.inner,(function(t,n){var r,i=ke(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Cc(this.inner)}}]),e}(),ap=function(){function e(){_(this,e),this.changes=new ip((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return x(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Sc.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:ul.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rd.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),op=function(){function e(t,n){_(this,e),this.k=t,this.Jt=n}return x(e,[{key:"addEntry",value:function(e,t,n){return cp(e).put(lp(t),n)}},{key:"removeEntry",value:function(e,t){var n=cp(e),r=lp(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return cp(e).get(lp(t)).next((function(e){return n.be(t,e)}))}},{key:"Pe",value:function(e,t){var n=this;return cp(e).get(lp(t)).next((function(e){return{document:n.be(t,e),size:jd(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Mf();return this.ve(e,t,(function(e,t){var i=n.be(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Mf(),i=new Nf(Hc.comparator);return this.ve(e,t,(function(e,t){var a=n.be(e,t);r=r.insert(e,a),i=i.insert(e,jd(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return rd.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return cp(e).jt({range:r},(function(e,t,r){for(var o=Hc.fromSegments(e);a&&Hc.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Mf(),a=t.path.length+1,o={};if(n.isEqual(Sc.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=wd(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Hh.collectionReadTimeIndex}return cp(e).jt(o,(function(e,n,o){if(e.length===a){var s=kd(r.k,n);t.path.isPrefixOf(s.key.path)?zl(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new sp(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return up(e).get(Wh.key).next((function(e){return ac(!!e),e}))}},{key:"Re",value:function(e,t){return up(e).put(Wh.key,t)}},{key:"be",value:function(e,t){if(t){var n=kd(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(Sc.min()))return n}return ul.newInvalidDocument(e)}}]),e}(),sp=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new ip((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return x(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Of((function(e,t){return wc(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Ce.get(a);if(o.document.isValidDocument()){var u=bd(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=jd(u);r+=c-s,n.push(t.De.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=bd(t.De.k,ul.newNoDocument(a,Sc.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),rd.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.Pe(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(ap);function up(e){return pd(e,Wh.store)}function cp(e){return pd(e,Hh.store)}function lp(e){return e.path.toArray()}var fp=function(){function e(t){_(this,e),this.k=t}return x(e,[{key:"Nt",value:function(e,t,n,r){var i=this;ac(n<r&&n>=0&&r<=11);var a=new id("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(jh.store)}(e),function(e){e.createObjectStore(Bh.store,{keyPath:Bh.keyPath}),e.createObjectStore(Vh.store,{keyPath:Vh.keyPath,autoIncrement:!0}).createIndex(Vh.userMutationsIndex,Vh.userMutationsKeyPath,{unique:!0}),e.createObjectStore(qh.store)}(e),hp(e),function(e){e.createObjectStore(Hh.store)}(e));var o=rd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Qh.store),e.deleteObjectStore(Gh.store),e.deleteObjectStore(Yh.store)}(e),hp(e)),o=o.next((function(){return function(e){var t=e.store(Yh.store),n=new Yh(0,0,Sc.min().toTimestamp(),0);return t.put(Yh.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Vh.store).Bt().next((function(n){e.deleteObjectStore(Vh.store),e.createObjectStore(Vh.store,{keyPath:Vh.keyPath,autoIncrement:!0}).createIndex(Vh.userMutationsIndex,Vh.userMutationsKeyPath,{unique:!0});var r=t.store(Vh.store),i=n.map((function(e){return r.put(e)}));return rd.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore($h.store,{keyPath:$h.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Wh.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Hh.store);t.createIndex(Hh.readTimeIndex,Hh.readTimeIndexPath,{unique:!1}),t.createIndex(Hh.collectionReadTimeIndex,Hh.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Oe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Jh.store,{keyPath:Jh.keyPath})}(e),function(e){e.createObjectStore(Zh.store,{keyPath:Zh.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(Hh.store).jt((function(e,n){t+=jd(n)})).next((function(){var n=new Wh(t);return e.store(Wh.store).put(Wh.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(Bh.store),r=e.store(Vh.store);return n.Bt().next((function(n){return rd.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Vh.userMutationsIndex,i).next((function(r){return rd.forEach(r,(function(r){ac(r.userId===n.userId);var i=Sd(t.k,r);return Ud(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Qh.store),n=e.store(Hh.store);return e.store(Yh.store).get(Yh.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new Nc(n),o=function(e){return[0,Lh(e)]}(a);r.push(t.get(o).next((function(n){return n?rd.resolve():function(n){return t.put(new Qh(0,Lh(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return rd.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(Xh.store,{keyPath:Xh.keyPath});var n=t.store(Xh.store),r=new Od,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Lh(i)})}};return t.store(Hh.store).jt({Kt:!0},(function(e,t){var n=new Nc(e);return i(n.popLast())})).next((function(){return t.store(qh.store).jt({Kt:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],Fh(r));return i(a.popLast())}))}))}},{key:"Oe",value:function(e){var t=this,n=e.store(Gh.store);return n.jt((function(e,r){var i=Td(r),a=Id(t.k,i);return n.put(a)}))}}]),e}();function hp(e){e.createObjectStore(Qh.store,{keyPath:Qh.keyPath}).createIndex(Qh.documentTargetsIndex,Qh.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Gh.store,{keyPath:Gh.keyPath}).createIndex(Gh.queryTargetsIndexName,Gh.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Yh.store)}var dp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pp=function(){function e(t,n,r,i,a,o,s,u,c,l){if(_(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Me=a,this.window=o,this.document=s,this.Fe=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.Pt())throw new uc(sc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new np(this,i),this.Ge=n+"main",this.k=new gd(u),this.ze=new ad(this.Ge,11,new fp(this.k)),this.He=new Wd(this.referenceDelegate,this.k),this.Jt=new Ld,this.Je=function(e,t){return new op(e,t)}(this.k,this.Jt),this.Ye=new Ad,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&tc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return x(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new uc(sc.FAILED_PRECONDITION,dp);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new gc(t,e.Fe)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=v(m().mark((function n(r){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=v(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget(v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return yp(t).put(new $h(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Me.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.cn(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(ud(t))return ec("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ec("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Me.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return vp(e).get(jh.key).next((function(e){return rd.resolve(t.un(e))}))}},{key:"hn",value:function(e){return yp(e).delete(this.clientId)}},{key:"ln",value:function(){var e=v(m().mark((function e(){var t,n,r,i,a=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=pd(e,$h.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return rd.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=ke(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?rd.resolve(!0):vp(e).get(jh.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new uc(sc.FAILED_PRECONDITION,dp);return!1}}return!(!t.networkEnabled||!t.inForeground)||yp(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ec("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=v(m().mark((function e(){var t=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[jh.store,$h.store],(function(e){var n=new dd(e,gc.I);return t.cn(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return yp(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Bd.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;ec("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,ed,(function(a){return i=new dd(a,r.Be?r.Be.next():gc.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw tc("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Me.enqueueRetryable((function(){return r.We(!1)})),new uc(sc.FAILED_PRECONDITION,td);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return vp(e).get(jh.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new uc(sc.FAILED_PRECONDITION,dp)}))}},{key:"an",value:function(e){var t=new jh(this.clientId,this.allowTabSynchronization,Date.now());return vp(e).put(jh.key,t)}},{key:"cn",value:function(e){var t=this,n=vp(e);return n.get(jh.key).next((function(e){return t.un(e)?(ec("IndexedDbPersistence","Releasing primary lease."),n.delete(jh.key)):rd.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(tc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Me.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),qt()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Me.enterRestrictedMode(!0),t.Me.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return ec("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return tc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(Yi){tc("Failed to set zombie client id.",Yi)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(Yi){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Pt",value:function(){return ad.Pt()}}]),e}();function vp(e){return pd(e,jh.store)}function yp(e){return pd(e,$h.store)}function mp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gp=x((function e(t,n){_(this,e),this.progress=t,this.In=n})),kp=function(){function e(t,n,r){_(this,e),this.Je=t,this.An=n,this.Jt=r}return x(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.bn(e,t,r)}))}},{key:"bn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=ke(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Pn",value:function(e,t){e.forEach((function(e,n){var r,i=ke(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Pn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ml(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Hc(t)).next((function(e){var t=Uf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Uf();return this.Jt.getCollectionParents(e,i).next((function(o){return rd.forEach(o,(function(o){var s=function(e,t){return new Al(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=ke(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,s=ke(o.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.key,l=r.get(c);null==l&&(l=ul.newInvalidDocument(c),r=r.insert(c,l)),pf(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){zl(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=qf(),a=ke(t);try{for(a.s();!(r=a.n()).done;){var o,s=ke(r.value.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value;u instanceof kf&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),bp=function(){function e(t,n,r,i){_(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return x(e,null,[{key:"$n",value:function(t,n){var r,i=qf(),a=qf(),o=ke(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wp=function(){function e(){_(this,e)}return x(e,[{key:"On",value:function(e){this.Mn=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Sc.min())?this.Fn(e,t):this.Mn.vn(e,r).next((function(a){var o=i.Ln(t,a);return(Dl(t)||Ol(t))&&i.Bn(t.limitType,o,r,n)?i.Fn(e,t):(Zu()<=an.DEBUG&&ec("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ql(t)),i.Mn.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new Of(Kl(e));return t.forEach((function(t,r){zl(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return Zu()<=an.DEBUG&&ec("QueryEngine","Using full collection scan to execute query:",ql(t)),this.Mn.getDocumentsMatchingQuery(e,t,Sc.min())}}]),e}(),_p=function(){function e(t,n,r,i){_(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Nf(wc),this.Kn=new ip((function(e){return fl(e)}),hl),this.jn=Sc.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new kp(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}return x(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Ep(e,t,n,r){return new _p(e,t,n,r)}function xp(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=v(m().mark((function e(t,n){var r,i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new kp(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],s=qf(),u=ke(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,f=ke(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=ke(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ke(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,s).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.On(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Tp(e,t){var n=oc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=rd.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ac(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function Ip(e){var t=oc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function Cp(e,t){var n=oc(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.He.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.He.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Lc.EMPTY_BYTE_STRING,Sc.min()).withLastLimboFreeSnapshotVersion(Sc.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.He.updateTargetData(e,c))}}));var s=Mf();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ap(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(Sc.min())){var u=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return rd.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,s)})).next((function(){return s}))})).then((function(e){return n.qn=i,e}))}function Ap(e,t,n,r,i){var a=qf();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Mf();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Sc.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):ec("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function Np(e,t){var n=oc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function Rp(e,t){var n=oc(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,rd.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new md(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function Dp(e,t,n){return Op.apply(this,arguments)}function Op(){return Op=v(m().mark((function e(t,n,r){var i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=oc(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ud(e.t1)){e.next=12;break}throw e.t1;case 12:ec("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Op.apply(this,arguments)}function Lp(e,t,n){var r=oc(e),i=Sc.min(),a=qf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=oc(e),i=r.Kn.get(n);return void 0!==i?rd.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Ul(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:Sc.min(),n?a:qf())})).next((function(e){return{documents:e,zn:a}}))}))}function Pp(e,t){var n=oc(e),r=oc(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Mp(e){var t=oc(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=oc(e),i=Mf(),a=wd(n),o=cp(t),s=IDBKeyRange.lowerBound(a,!0);return o.jt({index:Hh.readTimeIndex,range:s},(function(e,t){var n=kd(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:_d(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function Fp(e){return Up.apply(this,arguments)}function Up(){return Up=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oc(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=cp(e),n=Sc.min();return t.jt({index:Hh.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=_d(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Up.apply(this,arguments)}function jp(e,t,n,r){return Bp.apply(this,arguments)}function Bp(){return Bp=v(m().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=oc(t),o=qf(),s=Mf(),u=Bf(),c=ke(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),s=s.insert(h,n.Jn(f)),u=u.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Rp(a,function(e){return Ul(Rl(Nc.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ap(e,d,s,Sc.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function Vp(e,t){return qp.apply(this,arguments)}function qp(){return qp=v(m().mark((function e(t,n){var r,i,a,o=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:qf(),e.next=3,Rp(t,Ul(Cd(n.bundledQuery)));case 3:return i=e.sent,a=oc(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=oh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(Lc.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}var zp=function(){function e(t){_(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return x(e,[{key:"getBundleMetadata",value:function(e,t){return rd.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:oh(n.createTime)}),rd.resolve()}},{key:"getNamedQuery",value:function(e,t){return rd.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:Cd(e.bundledQuery),readTime:oh(e.readTime)}}(t)),rd.resolve()}}]),e}(),Kp=function(){function e(){_(this,e),this.ts=new Of(Hp.es),this.ns=new Of(Hp.ss)}return x(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Hp(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Hp(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Hc(new Nc([])),r=new Hp(n,e),i=new Hp(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Hc(new Nc([])),n=new Hp(t,e),r=new Hp(t,e+1),i=qf();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Hp(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Hp=function(){function e(t,n){_(this,e),this.key=t,this.fs=n}return x(e,null,[{key:"es",value:function(e,t){return Hc.comparator(e.key,t.key)||wc(e.fs,t.fs)}},{key:"ss",value:function(e,t){return wc(e.fs,t.fs)||Hc.comparator(e.key,t.key)}}]),e}(),Wp=function(){function e(t,n){_(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Of(Hp.es)}return x(e,[{key:"checkEmpty",value:function(e){return rd.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new vd(i,t,n,r);this.An.push(a);var o,s=ke(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ws=this.ws.add(new Hp(u.key,i)),this.Jt.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return rd.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return rd.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return rd.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return rd.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return rd.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Hp(t,0),i=new Hp(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),rd.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Of(wc);return t.forEach((function(e){var t=new Hp(e,0),i=new Hp(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),rd.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Hc.isDocumentKey(i)||(i=i.child(""));var a=new Hp(new Hc(i),0),o=new Of(wc);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),rd.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ac(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return rd.forEach(t.mutations,(function(i){var a=new Hp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Hp(t,0),r=this.ws.firstAfterOrEqual(n);return rd.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,rd.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Gp=function(){function e(t,n){_(this,e),this.Jt=t,this.Ts=n,this.docs=new Nf(Hc.comparator),this.size=0}return x(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return rd.resolve(n?n.document.mutableCopy():ul.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Mf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ul.newInvalidDocument(e))})),rd.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Mf(),i=new Hc(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||zl(t,c)&&(r=r.insert(c.key,c.mutableCopy()))}return rd.resolve(r)}},{key:"Es",value:function(e,t){return rd.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Qp(this)}},{key:"getSize",value:function(e){return rd.resolve(this.size)}}]),e}(),Qp=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).De=e,r}return x(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),rd.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(ap),Yp=function(){function e(t){_(this,e),this.persistence=t,this.Is=new ip((function(e){return fl(e)}),hl),this.lastRemoteSnapshotVersion=Sc.min(),this.highestTargetId=0,this.As=0,this.Rs=new Kp,this.targetCount=0,this.bs=Hd.ie()}return x(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),rd.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return rd.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return rd.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),rd.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),rd.resolve()}},{key:"ae",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Hd(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,rd.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),rd.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,rd.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),rd.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return rd.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return rd.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),rd.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),rd.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),rd.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return rd.resolve(n)}},{key:"containsKey",value:function(e,t){return rd.resolve(this.Rs.containsKey(t))}}]),e}(),Xp=function(){function e(t,n){var r=this;_(this,e),this.Ps={},this.Be=new gc(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Yp(this),this.Jt=new Dd,this.Je=function(e,t){return new Gp(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new gd(n),this.Ye=new zp(this.k)}return x(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.Ps[e.toKey()];return t||(t=new Wp(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;ec("MemoryPersistence","Starting transaction:",e);var i=new $p(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return rd.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),$p=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return x(n)}(nd),Jp=function(){function e(t){_(this,e),this.persistence=t,this.Cs=new Kp,this.Ns=null}return x(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw ic()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),rd.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),rd.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),rd.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rd.forEach(this.xs,(function(r){var i=Hc.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return rd.or([function(){return rd.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function Zp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ev(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function tv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var nv=function(){function e(t,n,r,i){_(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return x(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new uc(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(tc("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),rv=function(){function e(t,n,r){_(this,e),this.targetId=t,this.state=n,this.error=r}return x(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uc(i.error.code,i.error.message))),a?new e(t,i.state,r):(tc("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),iv=function(){function e(t,n){_(this,e),this.clientId=t,this.activeTargetIds=n}return x(e,null,[{key:"Os",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Kf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Kc(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(tc("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),av=function(){function e(t,n){_(this,e),this.clientId=t,this.onlineState=n}return x(e,null,[{key:"Os",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(tc("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ov=function(){function e(){_(this,e),this.activeTargetIds=Kf()}return x(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Ms",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sv=function(){function e(t,n,r,i,a){_(this,e),this.window=t,this.Me=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Nf(wc),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=Zp(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new ov),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return x(e,[{key:"start",value:function(){var e=v(m().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=ke(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Zp(this.persistenceKey,i)))&&(o=iv.Os(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(s=this.storage.getItem(this.Js))&&(u=this.Zs(s))&&this.ti(u),c=ke(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(tv(this.persistenceKey,e));if(n){var r=rv.Os(e,n);r&&(t=r.state)}}return this.ii.Fs(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(tv(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ci()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ec("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ec("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ec("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ec("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void tc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable(v(m().mark((function e(){var r,i,a,o,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(s));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}u=function(e){var t=gc.I;if(null!=e)try{var n=JSON.parse(e);ac("number"==typeof n),t=n}catch(e){tc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==gc.I&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Ms())}},{key:"ni",value:function(e,t,n){var r=new nv(this.currentUser,e,t,n),i=ev(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ms())}},{key:"si",value:function(e){var t=ev(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=tv(this.persistenceKey,e),i=new rv(e,t,n);this.setItem(r,i.Ms())}},{key:"ci",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ai",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ai(e);return iv.Os(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return nv.Os(new Xu(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return rv.Os(r,t)}},{key:"Zs",value:function(e){return av.Os(e)}},{key:"fi",value:function(){var e=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:ec("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.yi(o,s).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Kf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Pt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),uv=function(){function e(){_(this,e),this.pi=new ov,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return x(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new ov,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),cv=function(){function e(){_(this,e)}return x(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),lv=function(){function e(){var t=this;_(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.bi()},this.Pi=[],this.vi()}return x(e,[{key:"Ei",value:function(e){this.Pi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){ec("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ke(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"bi",value:function(){ec("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ke(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Pt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),fv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hv=function(){function e(t){_(this,e),this.Vi=t.Vi,this.Si=t.Si}return x(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Oi",value:function(e){this.ki(e)}},{key:"Mi",value:function(e){this.xi(e)}}]),e}(),dv=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return x(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Qu;o.listenOnce(zu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case qu.NO_ERROR:var t=o.getResponseJson();ec("Connection","XHR received:",JSON.stringify(t)),i(t);break;case qu.TIMEOUT:ec("Connection",'RPC "'+e+'" timed out'),a(new uc(sc.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:var n=o.getStatus();if(ec("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(sc).indexOf(t)>=0?t:sc.UNKNOWN}(r.status);a(new uc(s,r.message))}else a(new uc(sc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new uc(sc.UNAVAILABLE,"Connection failed."));break;default:ic()}}finally{ec("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bu(),a=Vu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Wu({})),this.qi(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())||"object"===typeof navigator&&"ReactNative"===navigator.product||Vt().indexOf("Electron/")>=0||function(){var e=Vt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||Vt().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");ec("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new hv({Vi:function(e){l?ec("Connection","Not sending because WebChannel is closed:",e):(c||(ec("Connection","Opening WebChannel transport."),u.open(),c=!0),ec("Connection","WebChannel sending:",e),u.send(e))},Si:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,Gu.EventType.OPEN,(function(){l||ec("Connection","WebChannel transport opened.")})),h(u,Gu.EventType.CLOSE,(function(){l||(l=!0,ec("Connection","WebChannel transport closed"),f.Oi())})),h(u,Gu.EventType.ERROR,(function(e){l||(l=!0,nc("Connection","WebChannel transport errored:",e),f.Oi(new uc(sc.UNAVAILABLE,"The operation could not be completed")))})),h(u,Gu.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];ac(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ec("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Ef[e];if(void 0!==t)return Af(t)}(a),s=i.message;void 0===o&&(o=sc.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Oi(new uc(o,s)),u.close()}else ec("Connection","WebChannel received:",n),f.Mi(n)}})),h(a,Ku.STAT_EVENT,(function(e){e.stat===Hu.PROXY?ec("Connection","Detected buffering proxy"):e.stat===Hu.NOPROXY&&ec("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){_(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return x(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);ec("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return ec("RestConnection","Received: ",e),e}),(function(t){throw nc("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=fv[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function pv(){return"undefined"!=typeof window?window:null}function vv(){return"undefined"!=typeof document?document:null}function yv(e){return new nh(e,!0)}var mv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_(this,e),this.Me=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return x(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&ec("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),gv=function(){function e(t,n,r,i,a,o,s,u){_(this,e),this.Me=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new mv(t,n)}return x(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"pr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"close",value:function(){var e=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===sc.RESOURCE_EXHAUSTED?(tc(n.toString()),tc("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===sc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new uc(sc.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.ar=n.Me.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return ec("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Me.enqueueAndForget((function(){return t.rr===e?n():(ec("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),kv=function(e){I(n,e);var t=D(n);function n(e,r,i,a,o,s){var u;return _(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).k=o,u}return x(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ic()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(ac(void 0===t||"string"==typeof t),Lc.fromBase64String(t||"")):(ac(void 0===t||t instanceof Uint8Array),Lc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?sc.UNKNOWN:Af(e.code);return new uc(t,e.message||"")}(o);n=new Yf(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=lh(e,u.document.name),l=oh(u.document.updateTime),f=new ol({mapValue:{fields:u.document.fields}}),h=ul.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Gf(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=lh(e,v.document),m=v.readTime?oh(v.readTime):Sc.min(),g=ul.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Gf([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=lh(e,b.document),_=b.removedTargetIds||[];n=new Gf([],_,w,null)}else{if(!("filter"in t))return ic();t.filter;var E=t.filter;E.targetId;var x=E.count||0,S=new If(x),T=E.targetId;n=new Qf(T,S)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Sc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Sc.min():t.readTime?oh(t.readTime):Sc.min()}(e);return this.listener.br(t,n)}},{key:"Pr",value:function(e){var t={};t.database=dh(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=dl(r)?{documents:bh(e,r)}:{query:wh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ih(e,t.resumeToken):t.snapshotVersion.compareTo(Sc.min())>0&&(n.readTime=rh(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ic()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=dh(this.k),t.removeTarget=e,this.gr(t)}}]),n}(gv),bv=function(e){I(n,e);var t=D(n);function n(e,r,i,a,o,s){var u;return _(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).k=o,u.Vr=!1,u}return x(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,q(C(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(ac(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(ac(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?oh(e.updateTime):oh(t);return n.isEqual(Sc.min())&&(n=oh(t)),new cf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=oh(e.commitTime);return this.listener.Cr(n,t)}return ac(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=dh(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return gh(t.k,e)}))};this.gr(n)}}]),n}(gv),wv=function(e){I(n,e);var t=D(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return x(n,[{key:"Or",value:function(){if(this.$r)throw new uc(sc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.ir.Bi(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sc.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uc(sc.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.ir.ji(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sc.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uc(sc.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return x((function e(){_(this,e)}))}()),_v=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}return x(e,[{key:"Br",value:function(){var e=this;0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Fr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(tc(t),this.Lr=!1):ec("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}]),e}(),Ev=x((function e(t,n,r,i,a){var o=this;_(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Lv(o),!e.t0){e.next=5;break}return ec("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=oc(t)).Gr.add(4),e.next=4,Tv(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,xv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new _v(r,i)}));function xv(e){return Sv.apply(this,arguments)}function Sv(){return Sv=v(m().mark((function e(t){var n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lv(t)){e.next=18;break}n=ke(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Sv.apply(this,arguments)}function Tv(e){return Iv.apply(this,arguments)}function Iv(){return Iv=v(m().mark((function e(t){var n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ke(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Iv.apply(this,arguments)}function Cv(e,t){var n=oc(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Ov(n)?Dv(n):cy(n).lr()&&Nv(n,t))}function Av(e,t){var n=oc(e),r=cy(n);n.Wr.delete(t),r.lr()&&Rv(n,t),0===n.Wr.size&&(r.lr()?r._r():Lv(n)&&n.Jr.set("Unknown"))}function Nv(e,t){e.Yr.X(t.targetId),cy(e).Pr(t)}function Rv(e,t){e.Yr.X(t),cy(e).vr(t)}function Dv(e){e.Yr=new $f({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),cy(e).start(),e.Jr.Br()}function Ov(e){return Lv(e)&&!cy(e).hr()&&e.Wr.size>0}function Lv(e){return 0===oc(e).Gr.size}function Pv(e){e.Yr=void 0}function Mv(e){return Fv.apply(this,arguments)}function Fv(){return Fv=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){Nv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Uv(e,t){return jv.apply(this,arguments)}function jv(){return jv=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pv(t),Ov(t)?(t.Jr.Kr(n),Dv(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Bv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return Vv=v(m().mark((function e(t,n,r){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Yf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=v(m().mark((function e(t,n){var r,i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ke(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ec("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,qv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gf?t.Yr.ot(n):n instanceof Qf?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(Sc.min())){e.next=29;break}return e.prev=14,e.next=17,Ip(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Lc.EMPTY_BYTE_STRING,n.snapshotVersion)),Rv(e,t);var r=new md(n.target,t,1,n.sequenceNumber);Nv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ec("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,qv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Vv.apply(this,arguments)}function qv(e,t,n){return zv.apply(this,arguments)}function zv(){return zv=v(m().mark((function e(t,n,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ud(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,Tv(t);case 5:t.Jr.set("Offline"),r||(r=function(){return Ip(t.localStore)}),t.asyncQueue.enqueueRetryable(v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ec("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,xv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Kv(e,t){return t().catch((function(n){return qv(e,n,t)}))}function Hv(e){return Wv.apply(this,arguments)}function Wv(){return Wv=v(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=oc(t),r=ly(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Gv(n)){e.next=19;break}return e.prev=3,e.next=6,Np(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,Qv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,qv(n,e.t0);case 17:e.next=2;break;case 19:Yv(n)&&Xv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Wv.apply(this,arguments)}function Gv(e){return Lv(e)&&e.Qr.length<10}function Qv(e,t){e.Qr.push(t);var n=ly(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Yv(e){return Lv(e)&&!ly(e).hr()&&e.Qr.length>0}function Xv(e){ly(e).start()}function $v(e){return Jv.apply(this,arguments)}function Jv(){return Jv=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ly(t).kr();case 1:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e){return ey.apply(this,arguments)}function ey(){return ey=v(m().mark((function e(t){var n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ly(t),r=ke(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e,t,n){return ny.apply(this,arguments)}function ny(){return ny=v(m().mark((function e(t,n,r){var i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=yd.from(i,n,r),e.next=3,Kv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Hv(t);case 5:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return iy=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ly(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cf(i=n.code)||i===sc.ABORTED){e.next=7;break}return r=t.Qr.shift(),ly(t).wr(),e.next=5,Kv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Hv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Yv(t)&&Xv(t);case 5:case"end":return e.stop()}}),e)}))),iy.apply(this,arguments)}function ay(e,t){return oy.apply(this,arguments)}function oy(){return oy=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=oc(t)).asyncQueue.verifyOperationInProgress(),ec("RemoteStore","RemoteStore received new credentials"),i=Lv(r),r.Gr.add(3),e.next=6,Tv(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,xv(r);case 12:case"end":return e.stop()}}),e)}))),oy.apply(this,arguments)}function sy(e,t){return uy.apply(this,arguments)}function uy(){return uy=v(m().mark((function e(t,n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oc(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,xv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,Tv(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),uy.apply(this,arguments)}function cy(e){return e.Xr||(e.Xr=function(e,t,n){var r=oc(e);return r.Or(),new kv(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Mv.bind(null,e),Ni:Uv.bind(null,e),br:Bv.bind(null,e)}),e.zr.push(function(){var t=v(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),Ov(e)?Dv(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Pv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function ly(e){return e.Zr||(e.Zr=function(e,t,n){var r=oc(e);return r.Or(),new bv(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:$v.bind(null,e),Ni:ry.bind(null,e),Nr:Zv.bind(null,e),Cr:ty.bind(null,e)}),e.zr.push(function(){var t=v(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,Hv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(ec("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var fy=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new cc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return x(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uc(sc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function hy(e,t){if(tc("AsyncQueue","".concat(t,": ").concat(e)),ud(e))return new uc(sc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var dy=function(){function e(t){_(this,e),this.comparator=t?function(e,n){return t(e,n)||Hc.comparator(e.key,n.key)}:function(e,t){return Hc.comparator(e.key,t.key)},this.keyedMap=Uf(),this.sortedSet=new Nf(this.comparator)}return x(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),py=function(){function e(){_(this,e),this.eo=new Nf(Hc.comparator)}return x(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):ic():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),vy=function(){function e(t,n,r,i,a,o,s,u){_(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return x(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,dy.emptySet(n),a,r,i,!0,!1)}}]),e}(),yy=x((function e(){_(this,e),this.so=void 0,this.listeners=[]})),my=x((function e(){_(this,e),this.queries=new ip((function(e){return Vl(e)}),Bl),this.onlineState="Unknown",this.io=new Set}));function gy(e,t){return ky.apply(this,arguments)}function ky(){return ky=v(m().mark((function e(t,n){var r,i,a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oc(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new yy),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=hy(e.t0,"Initialization of query '".concat(ql(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&xy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ky.apply(this,arguments)}function by(e,t){return wy.apply(this,arguments)}function wy(){return wy=v(m().mark((function e(t,n){var r,i,a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oc(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function _y(e,t){var n,r=oc(e),i=!1,a=ke(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=ke(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&xy(r)}function Ey(e,t,n){var r=oc(e),i=r.queries.get(t);if(i){var a,o=ke(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function xy(e){e.io.forEach((function(e){e.next()}))}var Sy=function(){function e(t,n,r){_(this,e),this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return x(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ke(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new vy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.ao?this.ho(e)&&(this.co.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.co.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=vy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}]),e}(),Ty=function(){function e(t,n){_(this,e),this.payload=t,this.byteLength=n}return x(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),Iy=function(){function e(t){_(this,e),this.k=t}return x(e,[{key:"Hn",value:function(e){return lh(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?yh(this.k,e.document,!1):ul.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return oh(e)}}]),e}(),Cy=function(){function e(t,n,r){_(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=Ay(t)}return x(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new Iy(this.k),i=ke(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hn(a.metadata.name),u=ke(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||qf()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=v(m().mark((function e(){var t,n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jp(this.localStore,new Iy(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=ke(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Vp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new gp(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ay(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ny=x((function e(t){_(this,e),this.key=t})),Ry=x((function e(t){_(this,e),this.key=t})),Dy=function(){function e(t,n){_(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=qf(),this.mutatedKeys=qf(),this.Ao=Kl(t),this.Ro=new dy(this.Ao)}return x(e,[{key:"bo",get:function(){return this.To}},{key:"Po",value:function(e,t){var n=this,r=t?t.vo:new py,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Dl(this.query)&&i.size===this.query.limit?i.last():null,c=Ol(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=zl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ao(f,u)>0||c&&n.Ao(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Dl(this.query)||Ol(this.query))for(;o.size>this.query.limit;){var l=Dl(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:s,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ic()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==a.length||u?{snapshot:new vy(this.query,e.Ro,i,a,e.mutatedKeys,0===s,u,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new py,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=qf(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new Ry(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new Ny(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=qf();var t=this.Po(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return vy.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),Oy=x((function e(t,n,r){_(this,e),this.query=t,this.targetId=n,this.view=r})),Ly=x((function e(t){_(this,e),this.key=t,this.$o=!1})),Py=function(){function e(t,n,r,i,a,o){_(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Oo={},this.Mo=new ip((function(e){return Vl(e)}),Bl),this.Fo=new Map,this.Lo=new Set,this.Bo=new Nf(Hc.comparator),this.Uo=new Map,this.qo=new Kp,this.Ko={},this.jo=new Map,this.Qo=Hd.re(),this.onlineState="Unknown",this.Wo=void 0}return x(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function My(e,t){return Fy.apply(this,arguments)}function Fy(){return Fy=v(m().mark((function e(t,n){var r,i,a,o,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Am(t),!(o=r.Mo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,Rp(r.localStore,Ul(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Uy(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&Cv(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function Uy(e,t,n,r){return jy.apply(this,arguments)}function jy(){return jy=v(m().mark((function e(t,n,r,i){var a,o,s,u,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=v(m().mark((function e(t,n,r,i){var a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Po(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,Lp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Po(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(am(t,n.targetId,s.Co),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Lp(t.localStore,n,!0);case 3:return a=e.sent,o=new Dy(n,a.zn),s=o.Po(a.documents),u=Wf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),am(t,r,c.Co),l=new Oy(n,r,o),e.abrupt("return",(t.Mo.set(n,l),t.Fo.has(r)?t.Fo.get(r).push(n):t.Fo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),jy.apply(this,arguments)}function By(e,t){return Vy.apply(this,arguments)}function Vy(){return Vy=v(m().mark((function e(t,n){var r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oc(t),i=r.Mo.get(n),!((a=r.Fo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Fo.set(i.targetId,a.filter((function(e){return!Bl(e,n)}))),void r.Mo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Dp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Av(r.remoteStore,i.targetId),rm(r,i.targetId)})).catch(Xd);case 9:e.next=14;break;case 11:return rm(r,i.targetId),e.next=14,Dp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Vy.apply(this,arguments)}function qy(e,t,n){return zy.apply(this,arguments)}function zy(){return zy=v(m().mark((function e(t,n,r){var i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nm(t),e.prev=1,e.next=4,function(e,t){var n,r=oc(e),i=xc.now(),a=t.reduce((function(e,t){return e.add(t.key)}),qf());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,s=[],u=ke(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=vf(c,n.get(c.key));null!=l&&s.push(new kf(c.key,l,sl(l.value.mapValue),lf.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.An.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Nf(wc)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,um(i,a.changes);case 9:return e.next=11,Hv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hy(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),zy.apply(this,arguments)}function Ky(e,t){return Hy.apply(this,arguments)}function Hy(){return Hy=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),e.prev=1,e.next=4,Cp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(ac(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?ac(n.$o):e.removedDocuments.size>0&&(ac(n.$o),n.$o=!1))})),e.next=8,um(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Xd(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Hy.apply(this,arguments)}function Wy(e,t,n){var r=oc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Mo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=oc(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ke(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&xy(n)}(r.eventManager,t),i.length&&r.Oo.br(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Gy(e,t,n){return Qy.apply(this,arguments)}function Qy(){return Qy=v(m().mark((function e(t,n,r){var i,a,o,s,u,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=oc(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Nf(Hc.comparator)).insert(o,ul.newNoDocument(o,Sc.min())),u=qf().add(o),c=new Hf(Sc.min(),new Map,new Of(wc),s,u),e.next=9,Ky(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),sm(i),e.next=16;break;case 14:return e.next=16,Dp(i.localStore,n,!1).then((function(){return rm(i,n,r)})).catch(Xd);case 16:case"end":return e.stop()}}),e)}))),Qy.apply(this,arguments)}function Yy(e,t){return Xy.apply(this,arguments)}function Xy(){return Xy=v(m().mark((function e(t,n){var r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),i=n.batch.batchId,e.prev=1,e.next=4,Tp(r.localStore,n);case 4:return a=e.sent,nm(r,i,null),tm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,um(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Xy.apply(this,arguments)}function $y(e,t,n){return Jy.apply(this,arguments)}function Jy(){return Jy=v(m().mark((function e(t,n,r){var i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oc(t),e.prev=1,e.next=4,function(e,t){var n=oc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return ac(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,nm(i,n,r),tm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,um(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Jy.apply(this,arguments)}function Zy(e,t){return em.apply(this,arguments)}function em(){return em=v(m().mark((function e(t,n){var r,i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lv((r=oc(t)).remoteStore)||ec("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=oc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=hy(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),em.apply(this,arguments)}function tm(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function nm(e,t,n){var r=oc(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function rm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ke(e.Fo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Mo.delete(a),n&&e.Oo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||im(e,t)}))}function im(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Av(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),sm(e))}function am(e,t,n){var r,i=ke(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ny?(e.qo.addReference(a.key,t),om(e,a)):a instanceof Ry?(ec("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||im(e,a.key)):ic()}}catch(o){i.e(o)}finally{i.f()}}function om(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(ec("SyncEngine","New document in limbo: "+n),e.Lo.add(r),sm(e))}function sm(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Hc(Nc.fromString(t)),r=e.Qo.next();e.Uo.set(r,new Ly(n)),e.Bo=e.Bo.insert(n,r),Cv(e.remoteStore,new md(Ul(Rl(n.path)),r,2,gc.I))}}function um(e,t,n){return cm.apply(this,arguments)}function cm(){return cm=v(m().mark((function e(t,n,r){var i,a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=oc(t),a=[],o=[],s=[],e.t0=i.Mo.isEmpty(),e.t0){e.next=9;break}return i.Mo.forEach((function(e,t){s.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=bp.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Oo.br(a),e.next=9,function(){var e=v(m().mark((function e(t,n){var r,i,a,o,s,u,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rd.forEach(n,(function(t){return rd.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return rd.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ud(e.t0)){e.next=10;break}throw e.t0;case 10:ec("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ke(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t){return fm.apply(this,arguments)}function fm(){return fm=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=oc(t)).currentUser.isEqual(n)){e.next=11;break}return ec("SyncEngine","User change. New user:",n.toKey()),e.next=5,xp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new uc(sc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,um(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e,t){var n=oc(e),r=n.Uo.get(t);if(r&&r.$o)return qf().add(r.key);var i=qf(),a=n.Fo.get(t);if(!a)return i;var o,s=ke(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Mo.get(u);i=i.unionWith(c.view.bo)}}catch(l){s.e(l)}finally{s.f()}return i}function dm(e,t){return pm.apply(this,arguments)}function pm(){return pm=v(m().mark((function e(t,n){var r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),e.next=3,Lp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&am(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function vm(e){return ym.apply(this,arguments)}function ym(){return ym=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oc(t),e.abrupt("return",Mp(n.localStore).then((function(e){return um(n,e)})));case 2:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function mm(e,t,n,r){return gm.apply(this,arguments)}function gm(){return gm=v(m().mark((function e(t,n,r,i){var a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oc(t),e.next=3,function(e,t){var n=oc(e),r=oc(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):rd.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Hv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(nm(a,n,i||null),tm(a,n),function(e,t){oc(oc(e).An).ee(t)}(a.localStore,n)):ic();case 11:return e.next=13,um(a,o);case 13:e.next=16;break;case 15:ec("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function km(e,t){return bm.apply(this,arguments)}function bm(){return bm=v(m().mark((function e(t,n){var r,i,a,o,s,u,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Am(r=oc(t)),Nm(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,wm(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,sy(r.remoteStore,!0);case 9:o=ke(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Cv(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Fo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return rm(r,t),Dp(r.localStore,t,!0)})),Av(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,wm(r,c);case 21:return function(e){var t=oc(e);t.Uo.forEach((function(e,n){Av(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Nf(Hc.comparator)}(r),r.Wo=!1,e.next=25,sy(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),bm.apply(this,arguments)}function wm(e,t,n){return _m.apply(this,arguments)}function _m(){return _m=v(m().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,y,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=oc(t),a=[],o=[],s=ke(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Fo.get(c))||0===f.length){e.next=34;break}return e.next=11,Rp(i.localStore,Ul(f[0]));case 11:l=e.sent,h=ke(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Mo.get(p),e.next=20,dm(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Pp(i.localStore,c);case 36:return g=e.sent,e.next=39,Rp(i.localStore,g);case 39:return l=e.sent,e.next=42,Uy(i,Em(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Oo.br(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),_m.apply(this,arguments)}function Em(e){return Nl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xm(e){var t=oc(e);return oc(oc(t.localStore).persistence).Tn()}function Sm(e,t,n,r){return Tm.apply(this,arguments)}function Tm(){return Tm=v(m().mark((function e(t,n,r,i){var a,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=oc(t)).Wo){e.next=5;break}ec("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Fo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Mp(a.localStore);case 11:return o=e.sent,s=Hf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,um(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Dp(a.localStore,n,!0);case 18:return rm(a,n,i),e.abrupt("break",21);case 20:ic();case 21:case"end":return e.stop()}}),e)}))),Tm.apply(this,arguments)}function Im(e,t,n){return Cm.apply(this,arguments)}function Cm(){return Cm=v(m().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Am(t)).Wo){e.next=45;break}a=ke(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Fo.has(s)){e.next=10;break}return ec("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Pp(i.localStore,s);case 12:return u=e.sent,e.next=15,Rp(i.localStore,u);case 15:return c=e.sent,e.next=18,Uy(i,Em(u),c.targetId,!1);case 18:Cv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ke(r),e.prev=30,h=m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Fo.has(t),!e.t0){e.next=5;break}return e.next=5,Dp(i.localStore,t,!1).then((function(){Av(i.remoteStore,t),rm(i,t)})).catch(Xd);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Cm.apply(this,arguments)}function Am(e){var t=oc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ky.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gy.bind(null,t),t.Oo.br=_y.bind(null,t.eventManager),t.Oo.zo=Ey.bind(null,t.eventManager),t}function Nm(e){var t=oc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$y.bind(null,t),t}function Rm(e,t,n){var r=oc(e);(function(){var e=v(m().mark((function e(t,n,r){var i,a,o,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=oc(e),r=oh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Ay(i)),a=new Cy(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,um(t,u.In,void 0);case 30:return e.next=32,function(e,t){var n=oc(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),nc("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Dm=function(){function e(){_(this,e),this.synchronizeTabs=!1}return x(e,[{key:"initialize",value:function(){var e=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=yv(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Ep(this.persistence,new wp,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new Xp(Jp.ks,this.k)}},{key:"Jo",value:function(e){return new uv}},{key:"terminate",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Om=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).tc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return x(n,[{key:"initialize",value:function(){var e=v(m().mark((function e(t){var r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(C(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Fp(this.localStore);case 4:return e.next=6,this.tc.initialize(this,t);case 6:return e.next=8,Nm(this.tc.syncEngine);case 8:return e.next=10,Hv(this.tc.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Ep(this.persistence,new wp,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ep(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fd.withCacheSize(this.cacheSizeBytes):Fd.DEFAULT;return new pp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pv(),vv(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new uv}}]),n}(Dm),Lm=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r,!1)).tc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return x(n,[{key:"initialize",value:function(){var e=v(m().mark((function e(t){var r,i=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(C(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.tc.syncEngine,e.t0=this.sharedClientState instanceof sv,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:mm.bind(null,r),gi:Sm.bind(null,r),yi:Im.bind(null,r),Tn:xm.bind(null,r),_i:vm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,km(i.tc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=pv();if(!sv.Pt(t))throw new uc(sc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Om),Pm=function(){function e(){_(this,e)}return x(e,[{key:"initialize",value:function(){var e=v(m().mark((function e(t,n){var r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Wy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lm.bind(null,this.syncEngine),e.next=12,sy(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new my}},{key:"createDatastore",value:function(e){var t,n=yv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new dv(t));return function(e,t,n,r){return new wv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Wy(o.syncEngine,e,0)},a=lv.Pt()?new lv:new cv,new Ev(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Py(e,t,n,r,i,a);return o&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oc(t),ec("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,Tv(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Mm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return v(m().mark((function r(){var i;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Fm=function(){function e(t){_(this,e),this.observer=t,this.muted=!1}return x(e,[{key:"next",value:function(e){this.observer.next&&this.ec(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"nc",value:function(){this.muted=!0}},{key:"ec",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Um=function(){function e(t,n){var r=this;_(this,e),this.sc=t,this.k=n,this.metadata=new cc,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return x(e,[{key:"close",value:function(){return this.sc.cancel()}},{key:"getMetadata",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rc",value:function(){var e=v(m().mark((function e(){var t,n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ic.decode(t),r=Number(n),isNaN(r)&&this.cc("length string (".concat(n,") is not valid number")),e.next=9,this.ac(r);case 9:return i=e.sent,e.abrupt("return",new Ty(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oc",value:function(){var e=v(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.uc()<0)){e.next=7;break}return e.next=3,this.hc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.uc())<0&&this.cc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ac",value:function(){var e=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.hc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.cc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ic.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cc",value:function(e){throw this.sc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"hc",value:function(){var e=v(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jm=function(){function e(t){_(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return x(e,[{key:"lookup",value:function(){var e=v(m().mark((function e(t){var n,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new uc(sc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=v(m().mark((function e(t,n){var r,i,a,o,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),i=dh(r.k)+"/documents",a={documents:n.map((function(e){return ch(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=mh(r.k,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());ac(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Sf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=v(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Hc.fromPath(t);n.mutations.push(new Tf(r,n.precondition(r)))})),e.next=7,function(){var e=v(m().mark((function e(t,n){var r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oc(t),i=dh(r.k)+"/documents",a={writes:n.map((function(e){return gh(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ic();t=Sc.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new uc(sc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?lf.updateTime(t):lf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sc.min()))throw new uc(sc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lf.updateTime(t)}return lf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Bm=function(){function e(t,n,r,i){_(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new mv(this.asyncQueue,"transaction_retry")}return x(e,[{key:"run",value:function(){this.lc-=1,this.fc()}},{key:"fc",value:function(){var e=this;this.ur.Zi(v(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new jm(e.datastore),(r=e.dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wc(t)}))}))})).catch((function(t){e.wc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"dc",value:function(e){try{var t=this.updateFunction(e);return!qc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wc",value:function(e){var t=this;this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((function(){return t.fc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Cf(t)}return!1}}]),e}(),Vm=function(){function e(t,n,r,i){var a=this;_(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xu.UNAUTHENTICATED,this.clientId=bc.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ec("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ec("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return x(e,[{key:"getConfiguration",value:function(){var e=v(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new uc(sc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new cc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(m().mark((function n(){var r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hy(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function qm(e,t){return zm.apply(this,arguments)}function zm(){return zm=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ec("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,xp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),zm.apply(this,arguments)}function Km(e,t){return Hm.apply(this,arguments)}function Hm(){return Hm=v(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Wm(t);case 3:return r=e.sent,ec("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ay(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ay(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Wm(e){return Gm.apply(this,arguments)}function Gm(){return Gm=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ec("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,qm(t,new Dm);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Gm.apply(this,arguments)}function Qm(e){return Ym.apply(this,arguments)}function Ym(){return Ym=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ec("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Km(t,new Pm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ym.apply(this,arguments)}function Xm(e){return Wm(e).then((function(e){return e.persistence}))}function $m(e){return Wm(e).then((function(e){return e.localStore}))}function Jm(e){return Qm(e).then((function(e){return e.remoteStore}))}function Zm(e){return Qm(e).then((function(e){return e.syncEngine}))}function eg(e){return tg.apply(this,arguments)}function tg(){return tg=v(m().mark((function e(t){var n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=My.bind(null,n.syncEngine),r.onUnlisten=By.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),tg.apply(this,arguments)}function ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function i(){return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Fm({next:function(a){t.enqueueAndForget((function(){return by(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new uc(sc.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new uc(sc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Sy(Rl(n.path),a,{includeMetadataChanges:!0,wo:!0});return gy(e,o)},i.next=3,eg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function rg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function i(){return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Fm({next:function(n){t.enqueueAndForget((function(){return by(e,o)})),n.fromCache&&"server"===r.source?i.reject(new uc(sc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Sy(n,a,{includeMetadataChanges:!0,wo:!0});return gy(e,o)},i.next=3,eg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var ig=x((function e(t,n,r,i,a,o,s,u){_(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),ag=function(){function e(t,n){_(this,e),this.projectId=t,this.database=n||"(default)"}return x(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),og=new Map;function sg(e,t,n){if(!n)throw new uc(sc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ug(e,t,n,r){if(!0===t&&!0===r)throw new uc(sc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function cg(e){if(!Hc.isDocumentKey(e))throw new uc(sc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function lg(e){if(Hc.isDocumentKey(e))throw new uc(sc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ic()}function hg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uc(sc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fg(e);throw new uc(sc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function dg(e,t){if(t<=0)throw new uc(sc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var pg=function(){function e(t){var n;if(_(this,e),void 0===t.host){if(void 0!==t.ssl)throw new uc(sc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uc(sc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ug("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return x(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),vg=function(){function e(t,n,r){_(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pg({}),this._settingsFrozen=!1,t instanceof ag?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uc(sc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ag(e.options.projectId)}(t))}return x(e,[{key:"app",get:function(){if(!this._app)throw new uc(sc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new uc(sc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fc;switch(e.type){case"gapi":var t=e.client;return ac(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new vc(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new uc(sc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=og.get(e);t&&(ec("ComponentProvider","Removing Datastore"),og.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function yg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=hg(e,vg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&nc("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Xu.MOCK_USER;else{o=Bt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new uc(sc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Xu(u)}e._authCredentials=new hc(new lc(o,s))}}var mg=function(){function e(t,n,r){_(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return x(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new kg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),gg=function(){function e(t,n,r){_(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return x(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),kg=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,Rl(i)))._path=i,a.type="collection",a}return x(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new mg(this.firestore,null,new Hc(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(gg);function bg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),sg("collection","path",t),e instanceof vg){var a=Nc.fromString.apply(Nc,[t].concat(r));return lg(a),new kg(e,null,a)}if(!(e instanceof mg||e instanceof kg))throw new uc(sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nc.fromString.apply(Nc,[t].concat(r)));return lg(o),new kg(e.firestore,null,o)}function wg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),1===arguments.length&&(t=bc.A()),sg("doc","path",t),e instanceof vg){var a=Nc.fromString.apply(Nc,[t].concat(r));return cg(a),new mg(e,null,new Hc(a))}if(!(e instanceof mg||e instanceof kg))throw new uc(sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nc.fromString.apply(Nc,[t].concat(r)));return cg(o),new mg(e.firestore,e instanceof kg?e.converter:null,new Hc(o))}function _g(e,t){return e=Zt(e),t=Zt(t),(e instanceof mg||e instanceof kg)&&(t instanceof mg||t instanceof kg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Eg(e,t){return e=Zt(e),t=Zt(t),e instanceof gg&&t instanceof gg&&e.firestore===t.firestore&&Bl(e._query,t._query)&&e.converter===t.converter}var xg=function(){function e(){var t=this;_(this,e),this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new mv(this,"async_queue_retry"),this.bc=function(){var e=vv();e&&ec("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=vv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.bc)}return x(e,[{key:"isShuttingDown",get:function(){return this.yc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pc(),this.vc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;var t=vv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pc(),this.yc)return new Promise((function(){}));var n=new cc;return this.vc((function(){return t.yc&&t.Ac?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))}},{key:"Vc",value:function(){var e=v(m().mark((function e(){var t=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.gc.length){e.next=14;break}return e.prev=1,e.next=4,this.gc[0]();case 4:this.gc.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ud(e.t0)){e.next=12;break}throw e.t0;case 12:ec("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.gc.length>0&&this.ur.Zi((function(){return t.Vc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(e){var t=this,n=this.mc.then((function(){return t.Ic=!0,e().catch((function(e){t.Ec=e,t.Ic=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw tc("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ic=!1,e}))}));return this.mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);var i=fy.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i}},{key:"Pc",value:function(){this.Ec&&ic()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Dc",value:function(){var e=v(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mc,e.next=3,t;case 3:if(t!==this.mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(e){var t,n=ke(this.Tc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Nc",value:function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ke(t.Tc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Dc()}))}},{key:"kc",value:function(e){this.Rc.push(e)}},{key:"Sc",value:function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}]),e}();function Sg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ke(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Tg=function(){function e(){_(this,e),this._progressObserver={},this._taskCompletionResolver=new cc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return x(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ig=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new xg,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return x(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ag(this),this._firestoreClient.terminate()}}]),n}(vg);function Cg(e){return e._firestoreClient||Ag(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ag(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ig(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Vm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ng(e,t,n){var r=new cc;return e.asyncQueue.enqueue(v(m().mark((function i(){return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,qm(e,n);case 3:return i.next=5,Km(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===sc.FAILED_PRECONDITION||e.code===sc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Rg(e){return function(e){return e.asyncQueue.enqueue(v(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xm(e);case 2:return n=t.sent,t.next=5,Jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=oc(e);return t.Gr.delete(0),xv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Cg(e=hg(e,Ig)))}function Dg(e){return function(e){return e.asyncQueue.enqueue(v(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xm(e);case 2:return n=t.sent,t.next=5,Jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=oc(t)).Gr.add(0),e.next=4,Tv(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Cg(e=hg(e,Ig)))}function Og(e,t){var n=Cg(e=hg(e,Ig)),r=new Tg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Um(e,t)}(function(e,t){if(e instanceof Uint8Array)return Mm(e,t);if(e instanceof ArrayBuffer)return Mm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,yv(t));e.asyncQueue.enqueueAndForget(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Rm,t.next=3,Zm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Lg(e,t){return function(e,t){return e.asyncQueue.enqueue(v(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=oc(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,$m(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Cg(e=hg(e,Ig)),t).then((function(t){return t?new gg(e,null,t.query):null}))}function Pg(e){if(e._initialized||e._terminated)throw new uc(sc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mg=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new uc(sc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dc(n)}return x(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Fg=function(){function e(t){_(this,e),this._byteString=t}return x(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Lc.fromBase64String(t))}catch(t){throw new uc(sc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Lc.fromUint8Array(t))}}]),e}(),Ug=x((function e(t){_(this,e),this._methodName=t})),jg=function(){function e(t,n){if(_(this,e),!isFinite(t)||t<-90||t>90)throw new uc(sc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new uc(sc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return x(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return wc(this._lat,e._lat)||wc(this._long,e._long)}}]),e}(),Bg=/^__.*__$/,Vg=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return x(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new kf(e,this.data,this.fieldMask,t,this.fieldTransforms):new gf(e,this.data,t,this.fieldTransforms)}}]),e}(),qg=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return x(e,[{key:"toMutation",value:function(e,t){return new kf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function zg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ic()}}var Kg=function(){function e(t,n,r,i,a,o){_(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return x(e,[{key:"path",get:function(){return this.settings.path}},{key:"$c",get:function(){return this.settings.$c}},{key:"Oc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Mc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.Lc(e),r}},{key:"Bc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.xc(),r}},{key:"Uc",value:function(e){return this.Oc({path:void 0,Fc:!0})}},{key:"qc",value:function(e){return lk(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}},{key:"Lc",value:function(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(zg(this.$c)&&Bg.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}]),e}(),Hg=function(){function e(t,n,r){_(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||yv(t)}return x(e,[{key:"Qc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kg({$c:e,methodName:t,jc:n,path:Dc.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function Wg(e){var t=e._freezeSettings(),n=yv(e._databaseId);return new Hg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Qc(a.merge||a.mergeFields?2:0,t,n,i);ok("Data must be an object, but it was:",o,r);var s,u,c=ik(r,o);if(a.merge)s=new Oc(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ke(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=sk(t,d,n);if(!o.contains(p))throw new uc(sc.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));fk(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new Oc(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Vg(new ol(c),s,u)}var Qg=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.$c)throw 1===e.$c?e.qc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ug);function Yg(e,t,n){return new Kg({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var Xg=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"_toFieldTransform",value:function(e){return new uf(e.path,new Zl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ug),$g=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Wc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=Yg(this,e,!0),n=this.Wc.map((function(e){return rk(e,t)})),r=new ef(n);return new uf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ug),Jg=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Wc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=Yg(this,e,!0),n=this.Wc.map((function(e){return rk(e,t)})),r=new nf(n);return new uf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ug),Zg=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Gc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=new af(e.k,Ql(e.k,this.Gc));return new uf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ug);function ek(e,t,n,r){var i=e.Qc(1,t,n);ok("Data must be an object, but it was:",i,r);var a=[],o=ol.empty();Ic(r,(function(e,r){var s=ck(t,e,n);r=Zt(r);var u=i.Bc(s);if(r instanceof Qg)a.push(s);else{var c=rk(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Oc(a);return new qg(o,s,i.fieldTransforms)}function tk(e,t,n,r,i,a){var o=e.Qc(1,t,n),s=[sk(t,r,n)],u=[i];if(a.length%2!=0)throw new uc(sc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(sk(t,a[c])),u.push(a[c+1]);for(var l=[],f=ol.empty(),h=s.length-1;h>=0;--h)if(!fk(l,s[h])){var d=s[h],p=u[h];p=Zt(p);var v=o.Bc(d);if(p instanceof Qg)l.push(d);else{var y=rk(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Oc(l);return new qg(f,m,o.fieldTransforms)}function nk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rk(n,e.Qc(r?4:3,t))}function rk(e,t){if(ak(e=Zt(e)))return ok("Unsupported field value:",t,e),ik(e,t);if(e instanceof Ug)return function(e,t){if(!zg(t.$c))throw t.qc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ke(e);try{for(a.s();!(n=a.n()).done;){var o=rk(n.value,t.Uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ql(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xc.fromDate(e);return{timestampValue:rh(t.k,n)}}if(e instanceof xc){var r=new xc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rh(t.k,r)}}if(e instanceof jg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fg)return{bytesValue:ih(t.k,e._byteString)};if(e instanceof mg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.qc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc("Unsupported field value: ".concat(fg(e)))}(e,t)}function ik(e,t){var n={};return Cc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ic(e,(function(e,r){var i=rk(r,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ak(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xc||e instanceof jg||e instanceof Fg||e instanceof mg||e instanceof Ug)}function ok(e,t,n){if(!ak(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=fg(n);throw"an object"===r?t.qc(e+" a custom object"):t.qc(e+" "+r)}}function sk(e,t,n){if((t=Zt(t))instanceof Mg)return t._internalPath;if("string"==typeof t)return ck(e,t);throw lk("Field path arguments must be of type string or ",e,!1,void 0,n)}var uk=new RegExp("[~\\*/\\[\\]]");function ck(e,t,n){if(t.search(uk)>=0)throw lk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ot(Mg,d(t.split(".")))._internalPath}catch(r){throw lk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new uc(sc.INVALID_ARGUMENT,s+e+u)}function fk(e,t){return e.some((function(e){return e.isEqual(t)}))}var hk=function(){function e(t,n,r,i,a){_(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return x(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new mg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(pk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),dk=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(){return q(C(n.prototype),"data",this).call(this)}}]),n}(hk);function pk(e,t){return"string"==typeof t?ck(e,t):t instanceof Mg?t._internalPath:t._delegate._internalPath}var vk=function(){function e(t,n){_(this,e),this.hasPendingWrites=t,this.fromCache=n}return x(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),yk=function(e){I(n,e);var t=D(n);function n(e,r,i,a,o,s){var u;return _(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return x(n,[{key:"exists",value:function(){return q(C(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(pk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(hk),mk=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return q(C(n.prototype),"data",this).call(this,e)}}]),n}(yk),gk=function(){function e(t,n,r,i){_(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new vk(i.hasPendingWrites,i.fromCache),this.query=r}return x(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new mk(n._firestore,n._userDataWriter,r.key,r,new vk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new uc(sc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new mk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new mk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:kk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function kk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ic()}}function bk(e,t){return e instanceof yk&&t instanceof yk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof gk&&t instanceof gk&&e._firestore===t._firestore&&Eg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function wk(e){if(Ol(e)&&0===e.explicitOrderBy.length)throw new uc(sc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _k=x((function e(){_(this,e)}));function Ek(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var xk=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).zc=e,a.Hc=r,a.Jc=i,a.type="where",a}return x(n,[{key:"_apply",value:function(e){var t=Wg(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new uc(sc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Pk(o,a);var u,c=[],l=ke(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(Lk(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=Lk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Pk(o,a),s=nk(n,"where",o,"in"===a||"not-in"===a);var h=pl.create(i,a,s);return function(e,t){if(t.V()){var n=Pl(e);if(null!==n&&!n.isEqual(t.field))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ll(e);null!==r&&Mk(e,t.field,r)}var i=function(e,t){var n,r=ke(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new uc(sc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new uc(sc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new gg(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(_k);var Sk=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).zc=e,i.Yc=r,i.type="orderBy",i}return x(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new uc(sc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new uc(sc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Sl(t,n);return function(e,t){if(null===Ll(e)){var n=Pl(e);null!==n&&Mk(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new gg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Al(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(_k);var Tk=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.Xc=r,a.Zc=i,a}return x(n,[{key:"_apply",value:function(e){return new gg(e.firestore,e.converter,jl(e._query,this.Xc,this.Zc))}}]),n}(_k);var Ik=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return x(n,[{key:"_apply",value:function(e){var t=Ok(e,this.type,this.ta,this.ea);return new gg(e.firestore,e.converter,function(e,t){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(_k);function Ck(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ik("startAt",t,!0)}function Ak(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ik("startAfter",t,!1)}var Nk=function(e){I(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return x(n,[{key:"_apply",value:function(e){var t=Ok(e,this.type,this.ta,this.ea);return new gg(e.firestore,e.converter,function(e,t){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(_k);function Rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nk("endBefore",t,!0)}function Dk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nk("endAt",t,!1)}function Ok(e,t,n,r){if(n[0]=Zt(n[0]),n[0]instanceof hk)return function(e,t,n,r,i){if(!r)throw new uc(sc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=ke(Fl(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Zc(t,r.key));else{var c=r.data.field(u.field);if(jc(c))throw new uc(sc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new uc(sc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new El(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Wg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new uc(sc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new uc(sc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ml(e)&&-1!==c.indexOf("/"))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Nc.fromString(c));if(!Hc.isDocumentKey(l))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Hc(l);s.push(Zc(t,f))}else{var h=nk(n,r,c);s.push(h)}}return new El(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Lk(e,t,n){if("string"==typeof(n=Zt(n))){if(""===n)throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ml(t)&&-1!==n.indexOf("/"))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Nc.fromString(n));if(!Hc.isDocumentKey(r))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zc(e,new Hc(r))}if(n instanceof mg)return Zc(e,n._key);throw new uc(sc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(fg(n),"."))}function Pk(e,t){if(!Array.isArray(e)||0===e.length)throw new uc(sc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new uc(sc.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Mk(e,t,n){if(!n.isEqual(t))throw new uc(sc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Fk=function(){function e(){_(this,e)}return x(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ic()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ic(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new jg(Fc(e.latitude),Fc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Mc(e);return new xc(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Nc.fromString(e);ac(Oh(n));var r=new ag(n.get(1),n.get(3)),i=new Hc(n.popFirst(5));return r.isEqual(t)||tc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Uk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var jk=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new Fg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mg(this.firestore,null,t)}}]),n}(Fk),Bk=function(){function e(t,n){_(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wg(t)}return x(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Vk(e,this._firestore),i=Uk(r.converter,t,n),a=Gg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,lf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Vk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Zt(t))||t instanceof Mg?tk(this._dataReader,"WriteBatch.update",i._key,t,n,o):ek(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,lf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Vk(e,this._firestore);return this._mutations=this._mutations.concat(new Sf(t._key,lf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new uc(sc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Vk(e,t){if((e=Zt(e)).firestore!==t)throw new uc(sc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qk=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new Fg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mg(this.firestore,null,t)}}]),n}(Fk);function zk(e){e=hg(e,mg);var t=hg(e.firestore,Ig),n=Cg(t),r=new qk(t);return function(e,t){var n=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function r(){return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(m().mark((function e(t,n,r){var i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=oc(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new uc(sc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=hy(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$m(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new yk(t,r,e._key,n,new vk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Kk(e){e=hg(e,gg);var t=hg(e.firestore,Ig),n=Cg(t),r=new qk(t);return function(e,t){var n=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function r(){return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(m().mark((function e(t,n,r){var i,a,o,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lp(t,n,!0);case 3:i=e.sent,a=new Dy(n,i.zn),o=a.Po(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=hy(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$m(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new gk(t,r,e,n)}))}function Hk(e,t,n){e=hg(e,mg);var r=hg(e.firestore,Ig),i=Uk(e.converter,t,n);return Yk(r,[Gg(Wg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,lf.none())])}function Wk(e,t,n){e=hg(e,mg);for(var r=hg(e.firestore,Ig),i=Wg(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Yk(r,[("string"==typeof(t=Zt(t))||t instanceof Mg?tk(i,"updateDoc",e._key,t,n,o):ek(i,"updateDoc",e._key,t)).toMutation(e._key,lf.exists(!0))])}function Gk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Zt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Sg(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(Sg(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof mg)l=hg(e.firestore,Ig),f=Rl(e._key.path),c={next:function(t){n[u]&&n[u](Xk(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=hg(e,gg);l=hg(p.firestore,Ig),f=p._query;var y=new qk(l);c={next:function(e){n[u]&&n[u](new gk(l,y,p,e))},error:n[u+1],complete:n[u+2]},wk(e._query)}return function(e,t,n,r){var i=new Fm(r),a=new Sy(t,i,n);return e.asyncQueue.enqueueAndForget(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gy,t.next=3,eg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.nc(),e.asyncQueue.enqueueAndForget(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=by,t.next=3,eg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Cg(l),f,h,c)}function Qk(e,t){return function(e,t){var n=new Fm(t);return e.asyncQueue.enqueueAndForget(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){oc(e).io.add(t),t.next()},t.next=3,eg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.nc(),e.asyncQueue.enqueueAndForget(v(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){oc(e).io.delete(t)},t.next=3,eg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Cg(e=hg(e,Ig)),Sg(t)?t:{next:t})}function Yk(e,t){return function(e,t){var n=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function r(){return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=qy,r.next=3,Zm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Cg(e),t)}function Xk(e,t,n){var r=n.docs.get(t._key),i=new qk(e);return new yk(e,i,t._key,r,new vk(n.hasPendingWrites,n.fromCache),t.converter)}var $k=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r))._firestore=e,i}return x(n,[{key:"get",value:function(e){var t=this,r=Vk(e,this._firestore),i=new qk(this._firestore);return q(C(n.prototype),"get",this).call(this,e).then((function(e){return new yk(t._firestore,i,r._key,e._document,new vk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_(this,e),this._firestore=t,this._transaction=n,this._dataReader=Wg(t)}return x(e,[{key:"get",value:function(e){var t=this,n=Vk(e,this._firestore),r=new jk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ic();var i=e[0];if(i.isFoundDocument())return new hk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new hk(t._firestore,r,n._key,null,n.converter);throw ic()}))}},{key:"set",value:function(e,t,n){var r=Vk(e,this._firestore),i=Uk(r.converter,t,n),a=Gg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Vk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Zt(t))||t instanceof Mg?tk(this._dataReader,"Transaction.update",i._key,t,n,o):ek(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Vk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Jk(e,t){return function(e,t){var n=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function r(){var i;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Qm(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Bm(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Cg(e=hg(e,Ig)),(function(n){return t(new $k(e,n))}))}function Zk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $g("arrayUnion",t)}function eb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$u=e}(Ln),Sn(new en("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ig(i,new dc(e.getProvider("auth-internal")),new mc(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Bn(Yu,"3.4.4",e),Bn(Yu,"3.4.4","esm2017")}();function tb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new uc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nb(){if("undefined"===typeof Uint8Array)throw new uc("unimplemented","Uint8Arrays are not available in this environment.")}function rb(){if("undefined"==typeof atob)throw new uc("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ib=function(){function e(t){_(this,e),this._delegate=t}return x(e,[{key:"toBase64",value:function(){return rb(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return nb(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rb(),new e(Fg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return nb(),new e(Fg.fromUint8Array(t))}}]),e}();function ab(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ke(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var ob=function(){function e(){_(this,e)}return x(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Pg(e=hg(e,Ig));var n=Cg(e),r=e._freezeSettings(),i=new Pm;return Ng(n,i,new Om(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Pg(e=hg(e,Ig));var t=Cg(e),n=e._freezeSettings(),r=new Pm;return Ng(t,r,new Lm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new uc(sc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new cc;return e._queue.enqueueAndForgetEvenWhileRestricted(v(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ad.Pt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ad.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(mp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),sb=function(){function e(t,n,r){var i=this;_(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ag||(this._appCompat=t)}return x(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||nc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Rg(this._delegate)}},{key:"disableNetwork",value:function(){return Dg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ug("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new cc;return e.asyncQueue.enqueueAndForget(v(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zy,n.next=3,Zm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Cg(e=hg(e,Ig)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Qk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new uc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new wb(this,bg(this._delegate,e))}catch(t){throw db(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new hb(this,wg(this._delegate,e))}catch(t){throw db(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gb(this,function(e,t){if(e=hg(e,vg),sg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new uc(sc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gg(e,null,function(e){return new Al(Nc.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw db(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Jk(this._delegate,(function(n){return e(new cb(t,n))}))}},{key:"batch",value:function(){var e=this;return Cg(this._delegate),new lb(new Bk(this._delegate,(function(t){return Yk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Og(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Lg(this._delegate,e).then((function(e){return e?new gb(t,e):null}))}}]),e}(),ub=function(e){I(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new ib(new Fg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hb.forKey(t,this.firestore,null)}}]),n}(Fk);var cb=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ub(t)}return x(e,[{key:"get",value:function(e){var t=this,n=_b(e);return this._delegate.get(n).then((function(e){return new yb(t._firestore,new yk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=_b(e);return n?(tb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=_b(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_b(e);return this._delegate.delete(t),this}}]),e}(),lb=function(){function e(t){_(this,e),this._delegate=t}return x(e,[{key:"set",value:function(e,t,n){var r=_b(e);return n?(tb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=_b(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_b(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),fb=function(){function e(t,n,r){_(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return x(e,[{key:"fromFirestore",value:function(e,t){var n=new mk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mb(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ub(t),n),i.set(n,a)),a}}]),e}();fb.INSTANCES=new WeakMap;var hb=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ub(t)}return x(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new wb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new wb(this.firestore,bg(this._delegate,e))}catch(t){throw db(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Zt(e))instanceof mg&&_g(this._delegate,e)}},{key:"set",value:function(e,t){t=tb("DocumentReference.set",t);try{return t?Hk(this._delegate,e,t):Hk(this._delegate,e)}catch(n){throw db(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Wk(this._delegate,e):Wk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw db(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Yk(hg(e.firestore,Ig),[new Sf(e._key,lf.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pb(n),a=vb(n,(function(t){return new yb(e.firestore,new yk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Gk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hg(e,mg);var t=hg(e.firestore,Ig);return ng(Cg(t),e._key,{source:"server"}).then((function(n){return Xk(t,e,n)}))}(this._delegate):function(e){e=hg(e,mg);var t=hg(e.firestore,Ig);return ng(Cg(t),e._key).then((function(n){return Xk(t,e,n)}))}(this._delegate),t.then((function(e){return new yb(n.firestore,new yk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new uc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new mg(n._delegate,r,new Hc(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new mg(n._delegate,r,t))}}]),e}();function db(e,t,n){return e.message=e.message.replace(t,n),e}function pb(e){var t,n=ke(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ab(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ab(e[0])?e[0]:ab(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yb=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"ref",get:function(){return new hb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return bk(this._delegate,e._delegate)}}]),e}(),mb=function(e){I(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ic()}(void 0!==t),t}}]),n}(yb),gb=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ub(t)}return x(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ek(this._delegate,function(e,t,n){var r=t,i=pk("where",e);return new xk(i,r,n)}(t,n,r)))}catch(i){throw db(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ek(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=pk("orderBy",e);return new Sk(n,t)}(t,n)))}catch(r){throw db(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ek(this._delegate,function(e){return dg("limit",e),new Tk("limit",e,"F")}(t)))}catch(n){throw db(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ek(this._delegate,function(e){return dg("limitToLast",e),new Tk("limitToLast",e,"L")}(t)))}catch(n){throw db(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Ek(this._delegate,Ck.apply(void 0,arguments)))}catch(t){throw db(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ek(this._delegate,Ak.apply(void 0,arguments)))}catch(t){throw db(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ek(this._delegate,Rk.apply(void 0,arguments)))}catch(t){throw db(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ek(this._delegate,Dk.apply(void 0,arguments)))}catch(t){throw db(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Eg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Kk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hg(e,gg);var t=hg(e.firestore,Ig),n=Cg(t),r=new qk(t);return rg(n,e._query,{source:"server"}).then((function(n){return new gk(t,r,e,n)}))}(this._delegate):function(e){e=hg(e,gg);var t=hg(e.firestore,Ig),n=Cg(t),r=new qk(t);return wk(e._query),rg(n,e._query).then((function(n){return new gk(t,r,e,n)}))}(this._delegate),t.then((function(e){return new bb(n.firestore,new gk(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pb(n),a=vb(n,(function(t){return new bb(e.firestore,new gk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Gk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kb=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new mb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),bb=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"query",get:function(){return new gb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new mb(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kb(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new mb(n._firestore,r))}))}},{key:"isEqual",value:function(e){return bk(this._delegate,e._delegate)}}]),e}(),wb=function(e){I(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return x(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new hb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new hb(this.firestore,void 0===e?wg(this._delegate):wg(this._delegate,e))}catch(t){throw db(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=hg(e.firestore,Ig),r=wg(e),i=Uk(e.converter,t);return Yk(n,[Gg(Wg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,lf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hb(t.firestore,e)}))}},{key:"isEqual",value:function(e){return _g(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(fb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gb);function _b(e){return hg(e,mg)}var Eb,xb=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Ot(Mg,n)}return x(e,[{key:"isEqual",value:function(e){return(e=Zt(e))instanceof Mg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dc.keyField().canonicalString())}}]),e}(),Sb=function(){function e(t){_(this,e),this._delegate=t}return x(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Xg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Qg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Zk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eb.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Zg("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Tb={Firestore:sb,GeoPoint:jg,Timestamp:xc,Blob:ib,Transaction:cb,WriteBatch:lb,DocumentReference:hb,DocumentSnapshot:yb,Query:gb,QueryDocumentSnapshot:mb,QuerySnapshot:bb,CollectionReference:wb,FieldPath:xb,FieldValue:Sb,setLogLevel:function(e){!function(e){Ju.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new en("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Tb)))})(Eb=Yn,(function(e,t){return new sb(e,t,new ob)})),Eb.registerVersion("@firebase/firestore-compat","0.1.13");var Ib=Yn.initializeApp({projectId:"medicall-3dced",appId:"1:663908802543:web:f4a13a428f6066156a601a",databaseURL:"https://medicall-3dced.firebaseio.com",storageBucket:"medicall-3dced.appspot.com",locationId:"us-central",apiKey:"AIzaSyBJ1p9hEKtKjQ1kzGm5D130wkTSCHCL7tc",authDomain:"medicall-3dced.firebaseapp.com",messagingSenderId:"663908802543",measurementId:"G-6ESGVFRY9W"}),Cb=function(e){var t=e.closeModal,n=(0,r.useContext)(h).setImages,i=u((0,r.useState)(!1),2),a=i[0],o=i[1],s=u((0,r.useState)(!1),2),l=s[0],f=s[1],p=u((0,r.useState)(""),2),y=p[0],g=p[1],b=function(){var e=u((0,r.useState)(""),2),t=e[0],n=e[1],i=function(){var e=v(m().mark((function e(t){var r,i,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,i=Ib.storage().ref(),a=i.child(r.name),e.next=5,a.put(r);case 5:return e.next=7,a.getDownloadURL();case 7:o=e.sent,n(o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return[t,i]}(),w=u(b,2),_=w[0],E=w[1],x=u((0,r.useState)(!1),2),S=x[0],T=x[1],I=u((0,r.useState)(""),2),C=I[0],A=I[1],N=(0,r.useRef)(null);(0,r.useEffect)((function(){return function(){qe.off()}}),[]);return(0,c.jsx)(Rt,{handleClick:function(){N.current.click()},handleSubmit:function(){if(console.log(_.toString()),y){var e={label:C,url:y};k(e),n((function(t){return[].concat(d(t),[e])}))}if(_){var t={label:C,url:_.toString()};k(t),n((function(e){return[].concat(d(e),[t])}))}qe.emit("addImage","esta funcionando?")},handleIsUpload:function(e){o(!1),f(e.target.checked)},handleFile:function(e){E(e.target.files[0])},handleLabel:function(e){A(e.target.value)},handleUrl:function(e){g(e.target.value),function(e){try{new URL(e)}catch(t){return T(!0)}T(!1)}(e.target.value),setTimeout((function(){T(!1)}),5e3)},handleIsUrl:function(e){o(e.target.checked),f(!1)},isUrl:a,isUpload:l,notification:S,label:C,url:y,hiddenFileInput:N,closeModal:t})},Ab=function(){var e=u($e(!1),3),t=e[0],n=e[1],r=e[2];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:n,className:gt,children:"Add photo"}),(0,c.jsx)(Xe,{isOpen:t,closeModal:r,children:(0,c.jsx)(Cb,{closeModal:r})})]})},Nb=function(){return(0,c.jsxs)("div",{className:dt,children:[(0,c.jsxs)("div",{className:pt,children:[(0,c.jsx)("div",{className:vt}),(0,c.jsx)("div",{className:vt})]}),(0,c.jsxs)("div",{className:yt,children:[(0,c.jsx)("h2",{children:"Kuroikuma"}),(0,c.jsx)("p",{children:"devchallenges.io"})]})]})},Rb=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:ft,children:[(0,c.jsxs)("div",{className:ht,children:[(0,c.jsx)(Nb,{}),(0,c.jsx)(bt,{})]}),(0,c.jsx)(Ab,{})]})})},Db=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(Rb,{})})},Ob=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:a,children:[(0,c.jsx)(Db,{}),(0,c.jsx)(lt,{})]})})};i.render((0,c.jsx)(r.StrictMode,{children:(0,c.jsx)(f,{children:(0,c.jsx)(Ob,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.61e30906.js.map